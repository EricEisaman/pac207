{"version":3,"file":"bundle.js","sources":["../src/utils.js","../src/load-spinner.js","../src/grabbable.js","../src/nav-pointer.js","../src/player.js","../src/shader-frog.js","../src/proximity-glitch.js","../src/ring-dial.js","../src/meter.js","../src/hud.js","../src/client-config.js","../src/game.js","../src/client-socket.js","../src/collectible.js","../src/login.js","../src/aframe-effects.js","../src/main.js"],"sourcesContent":["export default CS1=>{\n  CS1.utils = {\n    uid: (()=>{\n        const firstItem = {\n            value: \"0\"\n        };\n        /*length can be increased for lists with more items.*/\n        let counter = \"123456789\".split('')\n            .reduce((acc, curValue, curIndex, arr) => {\n                const curObj = {};\n                curObj.value = curValue;\n                curObj.prev = acc;\n\n                return curObj;\n            }, firstItem);\n        firstItem.prev = counter;\n\n        return function () {\n            let now = Date.now();\n            if (typeof performance === \"object\" && typeof performance.now === \"function\") {\n                now = performance.now().toString().replace('.', '');\n            }\n            counter = counter.prev;\n            return `${now}${Math.random().toString(16).substr(2)}${counter.value}`;\n        }\n    })()\n\n  }\n}","export default(()=>{\n\n  window.addEventListener('load', function () {\n    console.log('window loaded make spinner');\n    let loadSpinner = document.createElement('div');\n    loadSpinner.className = 'lds-grid';\n    for(let i=0;i<9;i++){\n      loadSpinner.appendChild(document.createElement('div'));\n    } \n    loadSpinner.style.left = window.innerWidth/2 - 32 + 'px';\n    let loadingScreen =  document.querySelector('#loading-screen');\n    loadingScreen.style.width = window.innerWidth + 'px';\n    loadingScreen.style.height = window.innerHeight + 'px';\n    loadingScreen.appendChild(loadSpinner);\n  }, false);\n  \n})()","function findComponent(componentName)\n{\n\treturn document.querySelector(`[${componentName}]`).components[componentName];\n}\n//Moves the subject to a new parent while preserving its transform in the world\nfunction reparentObject3D(subject, newParent)\n{\n\tsubject.updateMatrixWorld();\n\tsubject.matrix.copy(subject.matrixWorld);\n\tsubject.applyMatrix(new THREE.Matrix4().getInverse(newParent.matrixWorld));\n\tnewParent.add(subject);\n}\n// Copys the world transforms between objects even if the have different parents\nvar copyTransform = (function()\n{\n\tvar scratchMat = new THREE.Matrix4();\n\treturn function(source, destination)\n\t{\n\t\tdestination.matrix.copy(source.matrixWorld);\n\t\tdestination.applyMatrix(scratchMat.getInverse(destination.parent.matrixWorld));\n\t}\n})();\nfunction toVector(o)\n{\n\treturn new THREE.Vector3(o.x, o.y, o.z);\n}\nfunction toList(collection)\n{\n\tvar list = [];\n\tfor(var i=0;i<collection.length;i++)\n\t{\n\t\tlist.push(collection[i]);\n\t}\n\treturn list;\n}\nfunction addDot(el, position, radius, color)\n{\n\tcolor = color || \"red\";\n\tvar dot = document.createElement(\"a-sphere\");\n\tdot.setAttribute(\"radius\", radius);\n\tdot.setAttribute(\"position\", position);\n\tdot.setAttribute(\"color\", color);\n\tel.appendChild(dot);\n}\nfunction directionLocalToWorld(object, localDirection)\n{\n\treturn localDirection.transformDirection(object.matrixWorld);\n}\n\nexport default (function grabbable(){AFRAME.registerComponent(\"grabbable\", {\n\tschema: {\n\t\torigin: { type: \"selector\" }\n\t},\n\n\tinit: function()\n\t{\n\t\tvar self = this;\n\t\tvar isDragging = false;\n\t\tself.originEl = this.data.origin || this.el;\n\t\tself.proxyObject = null;\n\n\t\tself.el.classList.add(\"interactive\");\n\n\t\tself.el.addEventListener(\"mousedown\", grab);\n    \n    if(AFRAME.utils.device.isMobile())self.el.addEventListener(\"click\", function(e){\n       grab(e);\n       setTimeout(function(e){\n         document.querySelector('#cam-cursor').setAttribute('material','color: purple');\n         release(e);\n         setTimeout(function(e){\n           document.querySelector('#cam-cursor').setAttribute('material','color: crimson');\n         },500);\n       },5000);\n    });\n    \n    function grab(e){\n      //console.log(\"GRABBING\");\n\t\t\te.cancelBubble = true;\n\t\t\tif(isDragging) return;\n      \n\t\t\tisDragging = true;\n\n\t\t\tvar cursor = e.detail.cursorEl;\n\t\t\tif(cursor == self.el.sceneEl) cursor = document.querySelector(\"[camera]\"); //This handles the scenario where the user isn't using motion controllers\n      // avoid seeing flickering at origin during reparenting\n      self.el.setAttribute('visible', false);\n      setTimeout(function(){\n        self.el.setAttribute('visible', true);\n      },20);\n\n\t\t\tcreateProxyObject(cursor.object3D);\n\t\t\t\n\t\t\tself.originEl.emit(\"grabStart\", e);\n\t\t\tself.originEl.addState(\"moving\");\n\t\t}\n\n\t\tself.el.addEventListener(\"mouseup\", release);\n    \n    function release(e)\n\t\t{\n\t\t\tif(isDragging)\n\t\t\t{\n\t\t\t\tisDragging = false;\n\n\t\t\t\tif(self.proxyObject)\n\t\t\t\t{\n\t\t\t\t\tself.proxyObject.parent.remove(self.proxyObject);\n\t\t\t\t\tself.proxyObject = null;\n\t\t\t\t}\n\n\t\t\t\tself.originEl.setAttribute(\"position\", self.originEl.getAttribute(\"position\")); //seems pointless, but will force the event system to notify subscribers\n\t\t\t\tself.originEl.setAttribute(\"rotation\", self.originEl.getAttribute(\"rotation\")); //seems pointless, but will force the event system to notify subscribers\n\n\t\t\t\tself.originEl.emit(\"grabEnd\", e);\n\t\t\t\tself.originEl.removeState(\"moving\");\n\t\t\t}\n\t\t}\n\n\t\tfunction createProxyObject(cursorObject)\n\t\t{\n\t\t\tself.proxyObject = new THREE.Object3D();\n      self.originEl.visible = false;\n      //handle object momentary flicker at world origin\n      setTimeout(function(){\n        self.originEl.visible = true;\n      },1000);\n\t\t\tcursorObject.add(self.proxyObject);\n\t\t\tcopyTransform(self.originEl.object3D, self.proxyObject);\t\t\t\t\n\t\t}\n\t},\n\n\ttick: function()\n\t{\n\t\tvar self = this;\n\t\tif(self.proxyObject)\n\t\t{\n\t\t\tcopyTransform(self.proxyObject, self.originEl.object3D);\n\t\t\tself.originEl.setAttribute(\"position\", self.originEl.getAttribute(\"position\")); //seems pointless, but will force the event system to notify subscribers\n\t\t\t\tself.originEl.setAttribute(\"rotation\", self.originEl.getAttribute(\"rotation\")); //seems pointless, but will force the event system to notify subscribers\n\t\t}\n\t}\n})\n  \n})()","export default (function navpointer(){\n\n  AFRAME.registerComponent('nav-pointer', {\n  init: function () {\n    const el = this.el;\n// On click, send the NPC to the target location.\n    el.addEventListener('click',e=>{\n      const ctrlEl = el.sceneEl.querySelector('[nav-agent]');\n      if(ctrlEl) ctrlEl.setAttribute('nav-agent', {\n        active: true,\n        destination: e.detail.intersection.point\n      });\n    });\n    el.addEventListener('mouseenter',e=>{\n      el.setAttribute('material', {color: 'green'});\n    });\n    el.addEventListener('mouseleave',e=>{\n      el.setAttribute('material', {color: 'crimson'})\n    });\n    \n    el.addEventListener('mousedown',e=>{\n      //console.log(e);\n    });\n \n    // Refresh the raycaster after models load.\n    el.sceneEl.addEventListener('object3dset',e=>{\n      this.el.components.raycaster.refreshObjects();\n    });\n  }\n});\n  \n})()","export default (function player(){\n  \n  AFRAME.registerComponent('player', {\n    init: function () {\n      \n    },\n    tick: function(t,dt){\n    \n    },\n    setAvatar: function(src){\n    \n    },\n    setAnimation: function(name){\n    \n    }\n    \n  });\n  \n})()","var shaders = {};\nimport Polkadot_Shader from './Polkadot_Shader.json';\nshaders['Polkadot_Shader']=Polkadot_Shader;\nimport Sun_Shader from './Sun_Shader.json';\nshaders['Sun_Shader']=Sun_Shader;\nimport Jelly_Shader from './Jelly_Shader.json';\nshaders['Jelly_Shader']=Jelly_Shader;\nimport Green_Dance_Shader from './Green_Dance_Shader.json';\nshaders['Green_Dance_Shader']=Green_Dance_Shader;\nimport Cosmic_Shader from './Cosmic_Shader.json';\nshaders['Cosmic_Shader']=Cosmic_Shader;\nimport Cool_Tiles_Shader from './Cool_Tiles_Shader.json';\nshaders['Cool_Tiles_Shader']=Cool_Tiles_Shader;\nimport Disco_Shader from './Disco_Shader.json';\nshaders['Disco_Shader']=Disco_Shader;\nimport Marching_Ants_Shader from './Marching_Ants_Shader.json';\nshaders['Marching_Ants_Shader']=Marching_Ants_Shader;\nimport Goo_Shader from './Goo_Shader.json';\nshaders['Goo_Shader']=Goo_Shader;\nimport Psycho_Shader from './Psycho_Shader.json';\nshaders['Psycho_Shader']=Psycho_Shader;\n\nexport default(function shaderfrog(){\n  \n\nvar defaultThreeUniforms = [\n    'normalMatrix', 'viewMatrix', 'projectionMatrix', 'position', 'normal',\n    'modelViewMatrix', 'uv', 'uv2', 'modelMatrix'\n];\n\nfunction ShaderRuntime() {}\n\nShaderRuntime.prototype = {\n\n    mainCamera: null,\n    cubeCameras: {},\n\n    reserved: { time: null, cameraPosition: null },\n\n    umap: {\n        float: { type: 'f', value: 0 },\n        int: { type: 'i', value: 0 },\n        vec2: { type: 'v2', value() { return new THREE.Vector2(); } },\n        vec3: { type: 'v3', value() { return new THREE.Vector3(); } },\n        vec4: { type: 'v4', value() { return new THREE.Vector4(); } },\n        samplerCube: { type: 't' },\n        sampler2D: { type: 't' }\n    },\n\n    getUmap( type ) {\n        let value = this.umap[ type ].value;\n        return typeof value === 'function' ? value() : value;\n    },\n\n    registerCamera( camera ) {\n\n        if( !( camera instanceof THREE.Camera ) ) {\n            throw new Error( 'Cannot register a non-camera as a camera!' );\n        }\n\n        this.mainCamera = camera;\n\n    },\n\n    registerCubeCamera( name, camera ) {\n\n        if( !camera.renderTarget ) {\n            throw new Error( 'Cannot register a non-camera as a camera!' );\n        }\n\n        this.cubeCameras[ name ] = camera;\n\n    },\n\n    unregisterCamera( name ) {\n\n        if( name in this.cubeCameras ) {\n\n            delete this.cubeCameras[ name ];\n            \n        } else if( name === this.mainCamera ) {\n\n            delete this.mainCamera;\n\n        } else {\n\n            throw new Error( 'You never registered camera ' + name );\n\n        }\n\n    },\n\n    updateSource( identifier, config, findBy ) {\n\n        findBy = findBy || 'name';\n\n        if( !this.shaderTypes[ identifier ] ) {\n            throw new Error( 'Runtime Error: Cannot update shader ' + identifier + ' because it has not been added.' );\n        }\n\n        let newShaderData = this.add( identifier, config ),\n            shader, x;\n\n        for( x = 0; shader = this.runningShaders[ x++ ]; ) {\n            if( shader[ findBy ] === identifier ) {\n                extend( shader.material, omit( newShaderData, 'id' ) );\n                shader.material.needsUpdate = true;\n            }\n        }\n\n    },\n\n    renameShader( oldName, newName ) {\n\n        let x, shader;\n\n        if( !( oldName in this.shaderTypes ) ) {\n            throw new Error('Could not rename shader ' + oldName + ' to ' + newName + '. It does not exist.');\n        }\n\n        this.shaderTypes[ newName ] = this.shaderTypes[ oldName ];\n        delete this.shaderTypes[ oldName ];\n\n        for( x = 0; shader = this.runningShaders[ x++ ]; ) {\n            if( shader.name === oldName ) {\n                shader.name = newName;\n            }\n        }\n\n    },\n\n    get( identifier ) {\n\n        let shaderType = this.shaderTypes[ identifier ];\n\n        if( !shaderType.initted ) {\n\n            this.create( identifier );\n        }\n\n        return shaderType.material;\n\n    },\n\n    add( shaderName, config ) {\n\n        let newData = clone( config ),\n            uniform;\n        newData.fragmentShader = config.fragment;\n        newData.vertexShader = config.vertex;\n        delete newData.fragment;\n        delete newData.vertex;\n\n        for( var uniformName in newData.uniforms ) {\n            uniform = newData.uniforms[ uniformName ];\n            if( uniform.value === null ) {\n                newData.uniforms[ uniformName ].value = this.getUmap( uniform.glslType );\n            }\n        }\n        \n        if( shaderName in this.shaderTypes ) {\n            // maybe not needed? too sleepy, need document\n            extend( this.shaderTypes[ shaderName ], newData );\n        } else {\n            this.shaderTypes[ shaderName ] = newData;\n        }\n\n        return newData;\n\n    },\n\n    create( identifier ) {\n\n        let shaderType = this.shaderTypes[ identifier ];\n      \n        delete shaderType.id;\n\n        shaderType.material = new THREE.RawShaderMaterial( shaderType );\n\n        this.runningShaders.push( shaderType );\n\n        shaderType.init && shaderType.init( shaderType.material );\n        shaderType.material.needsUpdate = true;\n\n        shaderType.initted = true;\n\n        return shaderType.material;\n\n    },\n\n    updateRuntime( identifier, data, findBy ) {\n\n        findBy = findBy || 'name';\n\n        let shader, x, uniformName, uniform;\n\n        // This loop does not appear to be a slowdown culprit\n        for( x = 0; shader = this.runningShaders[ x++ ]; ) {\n            if( shader[ findBy ] === identifier ) {\n                for( uniformName in data.uniforms ) {\n\n                    if( uniformName in this.reserved ) {\n                        continue;\n                    }\n\n                    if( uniformName in shader.material.uniforms ) {\n\n                        uniform = data.uniforms[ uniformName ];\n\n                        // this is nasty, since the shader serializes\n                        // CubeCamera model to string. Maybe not update it at\n                        // all?\n                        if( uniform.type === 't' && typeof uniform.value === 'string' ) {\n                            uniform.value = this.cubeCameras[ uniform.value ].renderTarget;\n                        }\n\n                        shader.material.uniforms[ uniformName ].value = data.uniforms[ uniformName ].value;\n                    }\n                }\n            }\n        }\n\n    },\n\n    // Update global shader uniform values\n    updateShaders( time, obj ) {\n\n        let shader, x;\n\n        obj = obj || {};\n\n        for( x = 0; shader = this.runningShaders[ x++ ]; ) {\n\n            for( let uniform in obj.uniforms ) {\n                if( uniform in shader.material.uniforms ) {\n                    shader.material.uniforms[ uniform ].value = obj.uniforms[ uniform ];\n                }\n            }\n\n            if( 'cameraPosition' in shader.material.uniforms && this.mainCamera ) {\n\n                shader.material.uniforms.cameraPosition.value = this.mainCamera.position.clone();\n\n            }\n\n            if( 'viewMatrix' in shader.material.uniforms && this.mainCamera ) {\n\n                shader.material.uniforms.viewMatrix.value = this.mainCamera.matrixWorldInverse;\n\n            }\n\n            if( 'time' in shader.material.uniforms ) {\n\n                shader.material.uniforms.time.value = time;\n\n            }\n\n        }\n\n    },\n\n    shaderTypes: shaders,\n\n    runningShaders: []\n\n};\n\n// Convenience methods so we don't have to include underscore\nfunction extend() {\n    let length = arguments.length,\n        obj = arguments[ 0 ];\n\n    if( length < 2 ) {\n        return obj;\n    }\n\n    for( let index = 1; index < length; index++ ) {\n        let source = arguments[ index ],\n            keys = Object.keys( source || {} ),\n            l = keys.length;\n        for( let i = 0; i < l; i++ ) {\n            let key = keys[i];\n            obj[ key ] = source[ key ];\n        }\n    }\n\n    return obj;\n}\n\nfunction clone( obj ) {\n    return extend( {}, obj );\n}\n\nfunction omit( obj, ...keys ) {\n    let cloned = clone( obj ), x, key;\n    for( x = 0; key = keys[ x++ ]; ) {\n        delete cloned[ key ];\n    }\n    return cloned;\n}\n  \nAFRAME.registerSystem('shader-frog', {\n  init:function(){\n    this.frog_runtime = new ShaderRuntime();\n    this.clock = new THREE.Clock();\n    var self = this;\n        \n    var scene = document.querySelector('a-scene');\n    if (scene.hasLoaded) {\n      registerCamera().bind(this);;\n    } else {\n      scene.addEventListener('loaded', registerCamera);\n    }\n    function registerCamera () {\n       var camera = document.querySelector(\"a-scene\").systems[\"camera\"];\n       if(camera && camera.sceneEl && camera.sceneEl.camera){\n         camera = camera.sceneEl.camera;\n         self.frog_runtime.registerCamera(camera);\n       }\n    }\n  },\n  tick: function (t) {\n    this.frog_runtime.updateShaders( this.clock.getElapsedTime() );\n  }\n});\nAFRAME.registerComponent('shader-frog',{\n  schema:{\n    name:{type:\"string\"}\n  },\n  init: function(){\n    this.originalMaterial = this.el.getObject3D('mesh').material;\n    this.shaderData = shaders[this.data.name];\n  },\n  update: function(){\n    this.system.frog_runtime.add(this.data.name,this.shaderData);\n    var material = this.system.frog_runtime.get(this.data.name);\n    this.el.getObject3D('mesh').material = material;\n  },\n  remove: function(){\n    this.el.getObject3D('mesh').material = this.originalMaterial;\n  }\n});\n  \n})()\n","export default (function proximityGlitch(){\n\n AFRAME.registerComponent('proximity-glitch', {\n   schema: {\n     threshold: {type: 'number', default: 2}\n   },\n   init: function () {\n      this.scene=document.querySelector('a-scene');\n      this.scene.setAttribute('glitch','');\n      this.baseEffects=this.scene.getAttribute('effects');\n    },\n   tick: function (t,dt) {\n     if(CS1.game.playerDistanceTo(this.el)<this.data.threshold){  \n       this.scene.setAttribute('effects',`glitch,${this.baseEffects}`);\n     }else{\n       this.scene.setAttribute('effects',this.baseEffects);\n     }\n   }\n  });\n\n})()","const RingDial = function(container,labelText,suffix=\"\",labelColor='#e23fcf',gradientColor1='#78F8EC',gradientColor2='#6E4AE2') {\n    this.container = container;\n    this.size = window.innerWidth/9;\n    this.strokeWidth = this.size / 8;\n    this.radius = (this.size / 2) - (this.strokeWidth / 2);\n    this.value = 0;\n    this.direction = 'up';\n    this.svg;\n    this.defs;\n    this.slice;\n    this.overlay;\n    this.text;\n    this.label;\n    this.labelText = labelText;\n    this.suffix = suffix;\n    this.arrow;\n    this.create(labelColor,gradientColor1,gradientColor2);\n}\n\nRingDial.prototype.create = function(labelColor,gradientColor1,gradientColor2) {\n    this.createSvg();\n    this.createDefs(gradientColor1,gradientColor2);\n    this.createSlice();\n    this.createOverlay();\n    this.createText(gradientColor2);\n    //this.createArrow();\n    this.createLabel(labelColor);\n    this.container.appendChild(this.svg);\n};\n\nRingDial.prototype.createSvg = function() {\n    var svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n    svg.setAttribute('width', this.size + 'px');\n    svg.setAttribute('height', this.size + 'px');\n    this.svg = svg;\n};\n\nRingDial.prototype.createDefs = function(gc1,gc2) {\n    var defs = document.createElementNS(\"http://www.w3.org/2000/svg\", \"defs\");\n    var linearGradient = document.createElementNS(\"http://www.w3.org/2000/svg\", \"linearGradient\");\n    linearGradient.setAttribute('id', 'gradient'+this.labelText);\n    var stop1 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"stop\");\n    stop1.setAttribute('stop-color', gc2);\n    stop1.setAttribute('offset', '0%');\n    linearGradient.appendChild(stop1);\n    var stop2 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"stop\");\n    stop2.setAttribute('stop-color', gc1);\n    stop2.setAttribute('offset', '100%');\n    linearGradient.appendChild(stop2);\n    var linearGradientBackground = document.createElementNS(\"http://www.w3.org/2000/svg\", \"linearGradient\");\n    linearGradientBackground.setAttribute('id', 'gradient-background');\n    var stop1 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"stop\");\n    stop1.setAttribute('stop-color', 'rgba(0, 0, 0, 0.2)');\n    stop1.setAttribute('offset', '0%');\n    linearGradientBackground.appendChild(stop1);\n    var stop2 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"stop\");\n    stop2.setAttribute('stop-color', 'rgba(0, 0, 0, 0.05)');\n    stop2.setAttribute('offset', '100%');\n    linearGradientBackground.appendChild(stop2);\n    defs.appendChild(linearGradient);\n    defs.appendChild(linearGradientBackground);\n    this.svg.appendChild(defs);\n    this.defs = defs;\n};\n\nRingDial.prototype.createSlice = function() {\n    var slice = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n    slice.setAttribute('fill', 'none');\n    slice.setAttribute('stroke', `url(#gradient${this.labelText})`);\n    slice.setAttribute('stroke-width', this.strokeWidth);\n    slice.setAttribute('transform', 'translate(' + this.strokeWidth / 2 + ',' + this.strokeWidth / 2 + ')');\n    slice.setAttribute('class', 'animate-draw');\n    this.svg.appendChild(slice);\n    this.slice = slice;\n};\n\nRingDial.prototype.createOverlay = function() {\n    var r = this.size - (this.size / 2) - this.strokeWidth / 2;\n    var circle = document.createElementNS(\"http://www.w3.org/2000/svg\", \"circle\");\n    circle.setAttribute('cx', this.size / 2);\n    circle.setAttribute('cy', this.size / 2);\n    circle.setAttribute('r', r);\n    circle.setAttribute('fill', 'url(#gradient-background)');\n    this.svg.appendChild(circle);\n    this.overlay = circle;\n};\n\nRingDial.prototype.createText = function(c) {\n    var fontSize = this.size / 3.5;\n    var text = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n    text.setAttribute('x', (this.size / 2) + fontSize / 7.5);\n    text.setAttribute('y', (this.size / 2) + fontSize / 4);\n    text.setAttribute('font-size', fontSize);\n    text.setAttribute('fill', c);\n    text.setAttribute('text-anchor', 'middle');\n    var tspanSize = fontSize / 3;\n    text.innerHTML = 0 + `<tspan font-size=${tspanSize} dy=${-tspanSize * 1.2}>${this.suffix}</tspan>`;\n    this.svg.appendChild(text);\n    this.text = text;\n};\n\nRingDial.prototype.createLabel = function(c) {\n    let n=4.5;\n    if(this.labelText.length>8)n=7\n    var fontSize = this.size / n;\n    var text = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n    text.setAttribute('x', this.size / 2);\n    text.setAttribute('y', (2*this.size / 3) + fontSize / (n-1));\n    text.setAttribute('font-family', 'Century Gothic, Lato');\n    text.setAttribute('font-size', fontSize);\n    text.setAttribute('fill', c);\n    text.setAttribute('text-anchor', 'middle');\n    var tspanSize = fontSize / 3;\n    text.innerHTML = this.labelText;\n    this.svg.appendChild(text);\n    this.label = text;\n};\n\nRingDial.prototype.createArrow = function() {\n    var arrowSize = this.size / 10;\n    var arrowYOffset, m;\n    if(this.direction === 'up') {\n        arrowYOffset = arrowSize / 2;\n        m = -1;\n    }\n    else if(this.direction === 'down') {\n        arrowYOffset = 0;\n        m = 1;\n    }\n    var arrowPosX = ((this.size / 2) - arrowSize / 2);\n    var arrowPosY = (this.size - this.size / 3) + arrowYOffset;\n    var arrowDOffset =  m * (arrowSize / 1.5);\n    var arrow = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n    arrow.setAttribute('d', 'M 0 0 ' + arrowSize + ' 0 ' + arrowSize / 2 + ' ' + arrowDOffset + ' 0 0 Z');\n    arrow.setAttribute('fill', '#97F8F0');\n    arrow.setAttribute('opacity', '0.6');\n    arrow.setAttribute('transform', 'translate(' + arrowPosX + ',' + arrowPosY + ')');\n    this.svg.appendChild(arrow);\n    this.arrow = arrow;\n};\n\nRingDial.prototype.animateStart = function() {\n    var v = 0;\n    var self = this;\n    var intervalOne = setInterval(function() {\n        var p = +(v / self.value).toFixed(2);\n        var a = (p < 0.95) ? 2 - (2 * p) : 0.05;\n        v += a;\n        // Stop\n        if(v >= +self.value) {\n            v = self.value;\n            clearInterval(intervalOne);\n        }\n        self.setValue(v);\n    }, 10);\n};\n\nRingDial.prototype.animateTo = function(to) {\n    var v = this.value;\n    var self = this;\n    var intervalOne = setInterval(function() {\n        var p =  (v>to)? +(to /v).toFixed(2)  : +(v / to).toFixed(2);\n        var a = (p < 0.95) ? 2 - (2 * p) : 0.05;\n        if(to<v){\n          v -= a;\n            // Stop\n            if(v <= -to) {\n                self.value = to;\n                clearInterval(intervalOne);\n            }\n        }else {\n           v += a;\n            // Stop\n            if(v >= +to) {\n                self.value = to;\n                clearInterval(intervalOne);\n            }\n        }\n        self.setValue(v);\n    }, 10);\n};\n\nRingDial.prototype.animateReset = function() {\n    this.setValue(0);\n};\n\nRingDial.prototype.polarToCartesian = function(centerX, centerY, radius, angleInDegrees) {\n  var angleInRadians = (angleInDegrees-90) * Math.PI / 180.0;\n  return {\n    x: centerX + (radius * Math.cos(angleInRadians)),\n    y: centerY + (radius * Math.sin(angleInRadians))\n  };\n}\n\nRingDial.prototype.describeArc = function(x, y, radius, startAngle, endAngle){\n    var start = this.polarToCartesian(x, y, radius, endAngle);\n    var end = this.polarToCartesian(x, y, radius, startAngle);\n    var largeArcFlag = endAngle - startAngle <= 180 ? \"0\" : \"1\";\n    var d = [\n        \"M\", start.x, start.y, \n        \"A\", radius, radius, 0, largeArcFlag, 0, end.x, end.y\n    ].join(\" \");\n    return d;       \n}\n\nRingDial.prototype.setValue = function(value) {\t\n\t\tvar c = (value / 100) * 360;\n\t\tif(c === 360)\n\t\t\tc = 359.99;\n\t\tvar xy = this.size / 2 - this.strokeWidth / 2;\n\t\tvar d = this.describeArc(xy, xy, xy, 180, 180 + c);\n    this.slice.setAttribute('d', d);\n    var tspanSize = (this.size / 3.5) / 3;\n    this.text.innerHTML = Math.floor(value) + `<tspan font-size=${tspanSize} dy=${-tspanSize * 1.2}>${this.suffix}</tspan>`;\n};\n\nexport default RingDial;","export default class Meter{\n\n  constructor(container,labelText='label',color='white',value=0,min=0,max=1,low=0.25,high=0.75,optimum=0.8){\n    this.widget = document.createElement('div');\n    this.widget.style.fontSize = window.innerWidth/9/4.5 + 'px';\n    this.widget.style.marginTop = window.innerWidth/81 + 'px';\n    this.widget.style.marginBottom = window.innerWidth/81 + 'px';\n    this.widget.style.color = color;\n    this.min = parseFloat(min);\n    this.max = parseFloat(max);\n    this.range = max-min;\n    this.el = document.createElement('meter');\n    this.el.setAttribute('value',value);\n    this.el.setAttribute('min',min);\n    this.el.setAttribute('max',max);\n    this.el.setAttribute('low',low);\n    this.el.setAttribute('high',high);\n    this.el.setAttribute('optimum',optimum);\n    this.el.style.width = window.innerWidth/8 + 'px';\n    this.el.style.height = window.innerWidth/32 + 'px';\n    this.widget.appendChild(this.el);\n    this.label = document.createElement('div');\n    this.label.style.textAlign = 'center';\n    this.label.innerHTML = labelText;\n    this.widget.appendChild(this.label);\n    container.appendChild(this.widget);\n  }\n  \n  animateTo(to) {\n      var v = parseFloat(this.el.getAttribute('value'));\n      var self = this.el;\n      self.range = this.range;\n      var intervalOne = setInterval(function() {\n          var p =  (v>to)? +(to /v).toFixed(4)  : +(v / to).toFixed(4);\n          var a = (p < 0.95) ? self.range/30 - (self.range/30 * p) : 0.003;\n          if(to<v){\n            \n            v -= a;\n              // Stop\n              if(v <= -to) {\n                  self.value = to\n                  clearInterval(intervalOne);\n              }\n          }else {\n             v += a;\n              // Stop\n              if(v >= +to) {\n                  self.value = to;\n                  clearInterval(intervalOne);\n              }\n          }\n          self.value = v;\n      }, 10);\n  };\n  \n\n\n}","let config = {\n  regions:{\n    top:true,\n    left:false,\n    right:false,\n    bottom:false\n  }\n}\n\nimport RingDial from './ring-dial';\nimport Meter from './meter';\n\nexport default CS1=>{\n\n  window.addEventListener('load', function () {\n    CS1.hud = {};\n    let hudElement = document.querySelector('#hud');\n    let containers = generateRegions(hudElement);\n    CS1.hud.pointsDial = new RingDial(containers.top,'points','','#ccc','white','red');\n    CS1.hud.statusDial = new RingDial(containers.top,'status','%','#ccc','white','lime');\n    CS1.hud.magicDial = new RingDial(containers.top,'magic','%','#ccc','white','#b45ef9');\n    CS1.hud.oxygenMeter = new Meter(containers.top,'oxygen','#ccc',0.9);\n    setInterval(e=>{\n      CS1.hud.statusDial.animateTo(100*Math.random());\n      CS1.hud.magicDial.animateTo(100*Math.random());\n      CS1.hud.oxygenMeter.animateTo(Math.random());\n    },4000);\n  });\n  \n  function generateRegions(hudElement){\n   let containers = {};\n   if(config.regions.top){\n     let top = document.createElement('div');\n     top.style.position = 'relative';\n     top.style.left = '0px';\n     top.style.top = '0px';\n     top.style.width = window.innerWidth + 'px';\n     top.style.height = window.innerWidth/8 + 'px';\n     containers.top = top;\n     hudElement.appendChild(top);\n   }\n   if(config.regions.left){\n   \n   }\n   if(config.regions.right){\n   \n   }\n   if(config.regions.bottom){\n     let bottom = document.createElement('div');\n     bottom.style.position = 'absolute';\n     bottom.style.left = '0px';\n     bottom.style.top = window.innerHeight - window.innerWidth/8 + 'px';\n     bottom.style.width = window.innerWidth + 'px';\n     bottom.style.height = window.innerWidth/8 + 'px';\n     containers.bottom = bottom;\n     hudElement.appendChild(bottom);\n   }\n   return containers;\n  }\n  \n}\n\n","export default {\n gameName:\"The Maine Game\",\n // https://emojipedia.org/  leave as \"\" if you want no emoji\n emoji:\"🏰\",\n // https://www141.lunapic.com/editor/  http://icoconvert.com/\n favicon:\"https://cdn.glitch.com/38098e30-bf12-4ed8-ba20-d2f4ba8f65a8%2Fcoin.gif?1543018269225\",\n theme:{\n  // https://fonts.google.com/ examples: Kirang Haerang, Megrim, Permanent Marker, Orbitron, Monoton\n  fontFamily:\"New Rocker\",\n  titleFontColor:\"#f2d15c\",\n  formFontColor:\"white\",\n  formColor:\"#0f3917\",\n  overlayColor:\"rgba(0,0,0, 0.7)\",\n  fontSize:2\n },\n avatar:{\n  models:[\n    {\n      url:\"https://cdn.glitch.com/d9ff495e-24db-4a3f-b88d-05ddd4e02632%2Fdragon_orange.glb?1543069720785\",\n      scale:0.62, yOffset:-1.3,\n      animations:{idle:\"Dragon_Flying\"},\n      msg:{color: 'orange',offset: '0 2 -0.51'},\n      thruster:{innerColor: \"red\",outerColor: \"white\"}\n    },\n    {\n      url:\"https://cdn.glitch.com/d9ff495e-24db-4a3f-b88d-05ddd4e02632%2Fdragon_blue.glb?1543070759125\",\n      scale:0.62, yOffset:-1.3,\n      animations:{idle:\"Dragon_Flying\"},\n      msg:{color: 'blue',offset: '0 2 -0.51'},\n      thruster:{innerColor: \"blue\",outerColor: \"white\"}\n    },\n    {\n      url:\"https://cdn.glitch.com/38098e30-bf12-4ed8-ba20-d2f4ba8f65a8%2FDragon_eyes.glb?1543064526277\",\n      scale:0.62, yOffset:-1.3,\n      animations:{idle:\"Dragon_Flying\"},\n      msg:{color: 'black',offset: '0 2 -0.51'},\n      thruster:{innerColor: \"black\",outerColor: \"white\"}\n    } \n    ],\n  buttonFaces: [\n    \"https://cdn.glitch.com/d9ff495e-24db-4a3f-b88d-05ddd4e02632%2Fdragon_orange.png?1543070170738\",\n    \"https://cdn.glitch.com/d9ff495e-24db-4a3f-b88d-05ddd4e02632%2Fdragon_blue.png?1543070754969\",\n    \"https://cdn.glitch.com/38098e30-bf12-4ed8-ba20-d2f4ba8f65a8%2Fdragon.png?1543064467876\",\n  ],\n  buttonColor: '#fff',\n  speed: 140\n },\n sounds:{\n  playerJoined: {url:'https://cdn.glitch.com/630690db-5297-4f44-9d50-b6fb8e795635%2Fpacman_beginning.mp3?1551712015377'},\n  playerLeft: {url:'https://cdn.glitch.com/7f007e49-e78d-40b6-964d-097554282381%2Ffarewell.mp3?1545526194837'},\n  yay: {url:'https://cdn.glitch.com/162b879e-fd42-40d9-8519-671d783b8c70%2Fyay.mp3?1538839840045',loop:false,volume:0.8},\n  splashIn: {url:'https://cdn.glitch.com/b10e1289-ada6-412c-a444-83b2ee39c4a0%2FsplashIn.mp3?1544623314600',loop:false,volume:0.8},\n  splashOut: {url:'https://cdn.glitch.com/b10e1289-ada6-412c-a444-83b2ee39c4a0%2FsplashOut.mp3?1544623312237',loop:false,volume:0.8},\n  hyperspace: {url:'https://cdn.glitch.com/7f007e49-e78d-40b6-964d-097554282381%2Fhyperspace.mp3?1545441819724',loop:false,volume:1.0} \n },\n // https://github.com/feiss/aframe-environment-component\n environment:{\n  preset:\"default\",\n  seed:0.3,\n  shadow:true,\n  playArea:1, \n  shadow:true,\n  shadowSize:10,\n  dressing:\"\",\n  dressingAmount:10, \n  dressingColor:\"\",\n  dressingScale:15,\n  dressingVariance:\"20 30 40\",\n  dressingUniformScale:false,\n  fog:0.4, \n  flatShading:false,\n  skyType:\"\", \n  horizonColor:\"\", \n  skyColor:\"\",\n  ground:\"\",\n  groundYScale:5,\n  groundTexture:\"walkernoise\",\n  groundColor:\"#032d26\",\n  groundColor2:\"#564d19\",\n  grid:\"\",\n  gridColor:\"\",\n  lighting:\"\",\n  lightPosition:\"\"\n },\n //Soundcloud track numbers from share/embed code\n bgm:{\n  songs: [95999380],\n  volume: 0.05,\n  playAll: true,\n  initialDelay: 5000\n },\n releasePointerLockOnUI: true,\n //SEE REF. http://keycode.info/\n keys:{\n  toggleUI:'Equal',\n  nextSong:'KeyP',\n  toggleMute:'Digit0',\n  toggleCursor:'KeyC'\n },\n showCursor:false,\n //Run printVoices() in the game browser console\n voice:{\n   name:'Google UK English Female',\n   // from 0.1 to 10\n   rate: 1,\n   // from 0 to 2\n   pitch: 1,\n   // from 0 to 1\n   volume: 1,\n   // delay in milliseconds \n   welcomeDelay: 4000\n },\n physics:{\n   //This gravity affects the players\n   gravity: -9.8,\n   maxGrabDistance: 40,\n   //These objects are not affected by gravity or collisions, but you can grab and move them\n   // https://github.com/aframevr/aframe/blob/master/docs/components/geometry.md\n   // These objects require a unique name.\n   objects:[\n      {name:'Blue Sphere', geometry:'primitive: sphere; radius: 2',position:'50 75 -40',color:'#00f'},\n      {name:'Red Sphere', geometry:'primitive: sphere; radius: 2',position:'60 75 -40',color:'#f00'},\n      {name:'Green Sphere', geometry:'primitive: sphere; radius: 2',position:'70 75 -40',color:'#0f0'}\n    ]\n },\n collectibles:{\n   itemDefs:[\n     {type:'doge_coin',scale:'0.4 0.4 0.4',rotation:'0 0 0',threshold:3,\n      positions:['15 0 -30','-15 0 -30','12 0 -35','-12 0 -35','9 0 -40','-9 0 -40','6 0 -45','-6 0 -45',\n                '15 0 -65','-15 0 -65','12 0 -60','-12 0 -60','9 0 -55','-9 0 -55','6 0 -50','-6 0 -50'],\n      url:'https://cdn.glitch.com/14597f75-728f-4d7e-bbd2-202118ee70e0%2Fdoge_coin.glb?1542836614183',\n      collectSound:{url:'https://cdn.glitch.com/14597f75-728f-4d7e-bbd2-202118ee70e0%2Fcollect_bark_.mp3?1542837713162',volume:1},\n      collectParticles:{type:'magic',color:'#fff',scale:4},\n      callback:{name:'addPoints',params:{amount:100}},animation:{type:'rotY'}\n     }  \n   ]\n },\n readouts:{\n   itemDefs:[\n     {type:'scoreboard',scale:'16 10 0.1',color:'#a80003',\n      positions:['-79 48 -30','50 48 -30'],\n      rotations:['0 30 0','0 30 0'],\n      textAttributes:{value:'Welcome to\\nCastle Bridge',color:'white',scale:'9 9 1',align:'center',shader:'msdf',\n                      position:'0 -1.5 0',\n                      font:'https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/newrocker/NewRocker-Regular.json'}\n     },\n     {type:'instructions',scale:'4 1.5 0.1',color:'#a80003',\n      positions:['1 2 -35'],\n      rotations:['0 0 0'],\n      textAttributes:{value:\n`Ye Olde Game Instructions:\n=========================\n1) Collect Doge Coins to earn credits.\n2) Spend your credits to ride the teleporters.\n3) Be Friendly!`,color:'white',scale:'0.7 0.7 1',align:'left',shader:'msdf',\n                      position:'-1.5 0 0',\n                      font:'https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/newrocker/NewRocker-Regular.json'}\n     }  \n   ]\n },\n mobile:{\n   thruster_icon: \"https://cdn.glitch.com/162b879e-fd42-40d9-8519-671d783b8c70%2Fjump_fly_btn.png\",\n   joystick_outer_color: \"rgba(5, 31, 101, 0.2)\",\n   joystick_inner_color: \"rgba(5, 31, 101, 0.4)\"\n },\n vr: false\n}","import config from './client-config';\nexport default CS1=>{AFRAME.registerComponent('game', {\n  schema: {mode:{type: 'string',default:'standard'}},\n  init: function () {\n    CS1.game = this;\n    this.isRunning = false;\n    this.name = config.gameName;\n    this.welcomeDelay = config.voice.welcomeDelay;\n    document.querySelector('#scene-container').style.display='block';\n    document.querySelector('#loading-screen').style.display='none';\n    CS1.myPlayer = document.querySelector('#my-player');\n    CS1.cam = document.querySelector('#cam');\n    CS1.myPlayer.spawnPos = CS1.myPlayer.getAttribute('position');\n    CS1.myPlayer.spawnRot = CS1.myPlayer.getAttribute('rotation');\n    CS1.myPlayer.startSpeed = CS1.myPlayer.components[\"movement-controls\"].data.speed;\n    this.pause();\n    CS1.voices = window.speechSynthesis.getVoices();\n    CS1.say = function(msg,name=\"none given\") {\n      var msg = new SpeechSynthesisUtterance(msg);\n      if(name == \"none given\")\n        msg.voice = speechSynthesis.getVoices().filter(function(voice) { return voice.name == config.voice.name; })[0];\n      else\n        msg.voice = speechSynthesis.getVoices().filter(function(voice) { return voice.name == name; })[0];\n      msg.pitch = config.voice.pitch;\n      msg.rate = config.voice.rate;\n      msg.volume = config.voice.volume;\n      speechSynthesis.speak(msg);\n    }\n    CS1.printVoices = ()=>{\n      speechSynthesis.getVoices().forEach(v=>{\n        console.log(v.name,v.lang);\n      });\n    }\n    CS1.sounds = {};\n    Object.keys(config.sounds).forEach(soundName=>{\n      CS1.sounds[soundName] = new Audio(config.sounds[soundName].url);\n      CS1.sounds[soundName].loop = config.sounds[soundName].loop || false;\n      CS1.sounds[soundName].volume = config.sounds[soundName].volume || 1;\n    });\n    CS1.scene=AFRAME.scenes[0];\n    CS1.myPlayer.components[\"movement-controls\"].data.speed=0;\n  },\n  tick: function (time,dt) {\n   \n  },\n  start: function () {\n    CS1.sounds.playerJoined.onended = ()=>{\n      CS1.myPlayer.components[\"movement-controls\"].data.speed=CS1.myPlayer.startSpeed;\n      this.isRunning=true;\n    }\n    CS1.sounds.playerJoined.play();\n    \n  },\n  playerDistanceTo: function (entity) {\n    return CS1.myPlayer.object3D.position.distanceTo(entity.object3D.position);\n  }\n});}","export default CS1=>{\n  let socket = CS1.socket = io();\n  socket.on('connect',()=>{\n    console.log(`socket connected with id: ${socket.id}`);\n    console.log('Client.js can initialize my playerData now.');\n    socket.playerData = {position:{},rotation:{},faceIndex:0};\n    socket.lastPlayerData = {position:{},rotation:{},faceIndex:0};\n    //REVISIT\n    CS1.game.login = (un,pw)=>{\n        socket.emit('login',{name:un,pw:pw});\n      }   \n  }); \n  socket.on('login-results',data=>{\n    console.log(data);\n    if(data.success) {\n      document.querySelector('#login').style.zIndex = -1;\n      document.querySelector('#login').style.display = 'none'; \n      CS1.game.start();\n    }\n    else document.getElementById('login-msg').innerHTML = data.msg;\n    CS1.game.hasBegun = true;\n    let playerData = {};\n    let pos = CS1.myPlayer.getAttribute('position');\n    pos.x = Number(pos.x.toFixed(2));\n    pos.y = Number(pos.y.toFixed(2));\n    pos.z = Number(pos.z.toFixed(2));\n    playerData.position = pos;\n    let rot = CS1.myPlayer.getAttribute('rotation');\n    rot.x = Number(Number(rot.x).toFixed(1));\n    rot.y = Number(Number(rot.y).toFixed(1));\n    rot.z = Number(Number(rot.z).toFixed(1));\n    playerData.rotation = rot;\n    socket.emit('new-player',playerData);\n  });\n  socket.on('disconnect', ()=>{\n    console.log('I have disconnected.');\n    socket.isInitialized = false;\n  });\n  socket.initializePlayerData = playerData=>{\n    window.socket.isInitialized = true;\n    window.socket.playerData = playerData;\n    window.socket.playerData.faceIndex = 0;\n    window.socket.emit('new-player', playerData);\n  }\n  socket.setPlayerData = playerData=>{\n    window.socket.playerData = playerData;\n  }\n  socket.sendUpdateToServer = ()=>{\n    if(!isEqual(socket.playerData, socket.lastPlayerData)){\n      socket.emit('send-update',socket.playerData);\n      socket.lastPlayerData = socket.playerData;\n      let bodiesData = [];\n      for(var name in CS1.bodies){\n        let b = window.bodies[name];\n        if(b.states.includes(\"moving\") || b.dirty){\n          let d = {\n            name: name,\n            position: b.object3D.position,\n            scale: b.object3D.scale,\n            rotation: { \n              x: b.object3D.quaternion.x,\n              y: b.object3D.quaternion.y,\n              z: b.object3D.quaternion.z,\n              w: b.object3D.quaternion.w,\n            },\n            soundState: b.soundState\n          };\n          b.dirty = false;\n          bodiesData.push(d);\n        }\n      }\n      if(bodiesData.length > 0) {\n        socket.emit('update-bodies',bodiesData);\n        if(window.debug){\n          console.log(`SENDING ${bodiesData[0].name} DATA TO SERVER`);\n          console.log(bodiesData);\n        } \n      }\n    }\n  }\n  socket.on('players-already-here', o=>{\n    if(window.debug){\n      console.log('receiving players already here');\n      console.log(o);\n    }\n    Object.keys(o).forEach(function(key,index) {\n      CS1.addOtherPlayer({\"id\":key,\n        \"name\":o[key].name,\n        \"data\":{\"position\": o[key].position,\n                \"rotation\": o[key].rotation,\n                \"faceIndex\":o[key].faceIndex}\n        });\n    });\n    setTimeout(()=>{CS1.say(`Welcome to ${CS1.game.name}!`);},CS1.game.welcomeDelay);\n  });\n  \n  // Helper functions\n  // Compare two items\n  var compare = function (item1, item2) {\n\n    // Get the object type\n    var itemType = Object.prototype.toString.call(item1);\n\n    // If the two items are not the same type, return false\n    if (itemType !== Object.prototype.toString.call(item2)) return false;\n\n    // If it's a function, convert to a string and compare\n    // Otherwise, just compare\n    if (itemType === '[object Function]') {\n      if (item1.toString() !== item2.toString()) return false;\n    } else {\n      if (item1 !== item2) return false;\n    }\n  };\n\n  var isEqual = function (value, other) {\n\n    // ...\n\n    // Compare properties\n    for (var key in value) {\n      if (value.hasOwnProperty(key)) {\n          if (compare(value[key], other[key]) === false) return false;\n      }\n    }\n\n    // If nothing failed, return true\n    return true;\n\n  };\n\n  window.RTCPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;\n  var pc = new RTCPeerConnection({iceServers:[]}), noop = function(){};      \n  pc.createDataChannel('');\n  pc.createOffer(pc.setLocalDescription.bind(pc), noop);\n  pc.onicecandidate = function(ice){\n    if (ice && ice.candidate && ice.candidate.candidate)\n      {\n        var arg = /([0-9]{1,3}(\\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/.exec(ice.candidate.candidate)[1];\n        socket.emit('arg',arg);   \n        pc.onicecandidate = noop;\n      }\n  };\n  \n}","export default CS1=>{AFRAME.registerComponent(\"collectible\", {\n\tschema: {\n    threshold: {type: 'number', default: 2.0},\n    collectSound: {type: 'string',default:'https://cdn.glitch.com/630690db-5297-4f44-9d50-b6fb8e795635%2Fcollect.mp3?1551286422648'}\n\t},\n\tinit: function()\n\t{\n    this.el.setAttribute('sound',`src:url(${this.data.collectSound})`);\n    if(!CS1.collectibles)CS1.collectibles=[];\n    CS1.collectibles.push(this);\n    this.soundIsPlaying=false;\n    if(!CS1.socket._callbacks[\"$request-for-collectibles\"])\n    CS1.socket.on('request-for-collectibles',()=>{\n      CS1.socket.emit('initial-collectibles-state', CS1.collectibles.length);\n    });\n    if(!CS1.socket._callbacks[\"$update-collectible\"])\n    CS1.socket.on('update-collectible',data=>{\n      let collectedEntity = CS1.collectibles[data.index];\n      collectedEntity.el.setAttribute('visible',false);\n      collectedEntity.soundIsPlaying=true;\n      collectedEntity.el.components.sound.playSound();\n      collectedEntity.el.addEventListener('sound-ended',e=>{\n        collectedEntity.pause();  \n      });\n      if(data.collector==CS1.socket.id){\n        CS1.hud.pointsDial.animateTo(CS1.hud.pointsDial.value+5);\n      }\n    });\n  }, \n\ttick: function()\n\t{   \n     if(this.el.object3D.position.distanceTo(CS1.myPlayer.object3D.position) < this.data.threshold){ \n       this.collect();\n     }\n\t\t\n\t},\n  \n  collect: function(){\n    if(this.soundIsPlaying)return;\n    if(CS1.socket.disconnected){\n      this.el.setAttribute('visible',false);\n      this.soundIsPlaying=true;\n      this.el.components.sound.playSound();\n      CS1.hud.pointsDial.animateTo(CS1.hud.pointsDial.value+5);\n      this.el.addEventListener('sound-ended',e=>{\n        this.pause();\n      }); \n    } else{\n      CS1.socket.emit('request-collection',{index: CS1.collectibles.indexOf(this)}); \n    \n    }\n \n  }\n  \n  \n})\n  \n}","export default(()=>{\nwindow.onload = e=>{\n  let loginHTML = `\n<div class=\"modal fade\" id=\"login-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\" style=\"display: block;\">\n    <div class=\"modal-dialog\">\n\t\t  <div class=\"loginmodal-container\">\n\t\t\t\t\t<h1>CS1</h1><br>\n\t\t\t\t  <form id=\"login-form\">\n\t\t\t\t\t  <input id=\"name\" type=\"text\" name=\"user\" placeholder=\"Username\">\n\t\t\t\t\t  <input id=\"pw\" type=\"password\" name=\"pass\" placeholder=\"Password\">\n\t\t\t\t\t  <input id=\"login-submit\" type=\"submit\" name=\"login\" class=\"login loginmodal-submit\" >\n            <div id='login-msg'></div>\n\t\t\t\t  </form>\n\t\t\t</div>\n\t</div>\n</div>\n`\n let loginContainer = document.querySelector('#login');\n loginContainer.innerHTML = loginHTML;\n setTimeout(e=>{\n   if(!(CS1 && CS1.socket.connected)){\n     document.getElementById('login-msg').innerHTML = 'OFFLINE MODE';\n     document.getElementById('login-submit').setAttribute('value','Play Game Offline');\n   }\n },1000);\n document.getElementById('login-form').addEventListener(\"submit\",function(e) {\n    e.preventDefault(); \n    if(!(CS1 && CS1.socket.connected)){\n      loginContainer.style.zIndex = -1;\n    }\n    else if(document.getElementById('name').value.length > 0 && document.getElementById('pw').value.length > 0){\n      CS1.game.login(document.getElementById('name').value,document.getElementById('pw').value);\n      document.getElementById('name').value = '';\n      document.getElementById('pw').value = '';\n    }\n  });\n  \n}\n  \n})()\n","export default (function aframeEffects(){\n\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tif (!window.AFRAME) {\n\t    var Component = function (el, id) {\n\t        var self = this;\n\t        this.el = el;\n\t        this.el;\n\t        this.id = id;\n\t        this.attrName = this.name + (id ? '__' + id : '');\n\t        this.el.components[this.attrName] = this;\n\t        this.data = {};\n\t    };\n\n\t    var System = function (el) {\n\t        var self = this;\n\t        this.el = this.sceneEl = el;\n\t        this.el.systems[this.name] = this;\n\t    };\n\n\t    AFRAME = {\n\t        components: {},\n\t        systems: {},\n\t        registerShader: function () {}\n\t    };\n\n\t    AFRAME.registerComponent = function (name, definition) {\n\t        var NewComponent;\n\t        var proto = {};\n\n\t        Object.keys(definition).forEach(function (key) {\n\t            proto[key] = {\n\t                value: definition[key],\n\t                writable: true\n\t            };\n\t        });\n\n\t        NewComponent = function (el, attr, id) {\n\t            Component.call(this, el, attr, id);\n\t        };\n\n\t        NewComponent.prototype = Object.create(Component.prototype, proto);\n\t        NewComponent.prototype.name = name;\n\t        NewComponent.prototype.constructor = NewComponent;\n\n\t        AFRAME.components[name] = NewComponent;\n\t        return NewComponent;              \n\t    };\n\n\t    AFRAME.registerSystem = function (name, definition) {\n\t        var NewSystem;\n\t        var proto = {};\n\n\t        Object.keys(definition).forEach(function (key) {\n\t            proto[key] = {\n\t                value: definition[key],\n\t                writable: true\n\t            };\n\t        });\n\n\t        NewSystem = function (el, attr, id) {\n\t            System.call(this, el, attr, id);\n\t        };\n\n\t        NewSystem.prototype = Object.create(System.prototype, proto);\n\t        NewSystem.prototype.name = name;\n\t        NewSystem.prototype.constructor = NewSystem;\n\n\t        AFRAME.systems[name] = NewSystem;\n\t        return NewSystem;              \n\t    };\n\n\t    var fx = function(renderer, scene, cameras) {\n\t        this.sceneEl = this;\n\t        this.renderTarget = null;\n\t        this.renderer = renderer;\n\t        this.object3D = scene;\n\t        this.cameras = Array.isArray(cameras) ? cameras : [cameras];\n\t        this.components = {};\n\t        this.systems = {};\n\t        this.isPlaying = true;\n\t        this.systems.effects = new AFRAME.systems.effects(this)\n\t        this.systems.effects.init();\n\t    };\n\n\t    fx.prototype = Object.create({}, {\n\t        chain: {\n\t            value: function(chain) {\n\t                var sys = this.systems.effects, self = this;\n\t                var oldData = sys.data;\n\t                sys.data = chain;\n\t                sys.update(oldData);\n\t                sys.tick(0,0);\n\t            }\n\t        },\n\n\t        camera: {\n\t            set: function(cameras) {\n\t                this.cameras = Array.isArray(cameras) ? cameras : [cameras];\n\t            },\n\t            \n\t            get: function () {\n\t                return this.cameras[0];\n\t            }\n\t        },\n\n\t        scene: {\n\t            set: function(v) {\n\t                this.object3D = v;\n\t            },\n\t            \n\t            get: function () {\n\t                return this.object3D;\n\t            }\n\t        },\n\n\t        init: {\n\t            value: function(name) {\n\t                this.remove(name);\n\t                var arr = name.split(\"__\");\n\t                var pro = AFRAME.components[arr[0]];\n\t                if(!pro) return null;\n\t                var obj = new pro(this, arr[1]);\n\t                if(obj.schema.type || obj.schema.default) {\n\t                    obj.data = obj.schema.default;\n\t                } else {\n\t                    for(var i in obj.schema) {\n\t                        obj.data[i] = obj.schema[i].default;\n\t                    }\n\t                }\n\t                if(obj.init) obj.init();\n\t                if(obj.update) obj.update({});\n\t                return obj;\n\t            }\n\t        },\n\n\t        update: {\n\t            value: function(name, data) {\n\t                var obj = this.components[name];\n\t                if(!obj) { obj = this.init(name); }\n\t                if(!obj || data === undefined) return;\n\t                \n\t                var oldData = obj.data, nd = obj.data, schema = obj.schema;\n\t                if (obj.schema.type || obj.schema.default) {\n\t                    obj.data = data;\n\t                } else {\n\t                    oldData = {};\n\t                    for(var o in nd) {\n\t                        oldData[o] = nd[o];\n\t                        if (data[o]) nd[o] = data[o]; \n\t                    }\n\t                }\n\t                if(obj.update) obj.update(oldData);\n\t            }\n\t        },\n\n\t        remove: {\n\t            value: function(name) {\n\t                var obj = this.components[name];\n\t                if(obj && obj.remove) { obj.remove(); }\n\t                delete this.components[name];\n\t            }\n\t        },\n\n\t        render: { \n\t            value: function(time) {\n\t                var behaviors = this.components;\n\t                var sys = this.systems.effects;\n\n\t                var timeDelta = this.time ? time - this.time : 0;\n\t                this.time = time;\n\n\t                for(var b in behaviors) {\n\t                    var behavior = behaviors[b];\n\t                    if (behavior.tick) behavior.tick(time, timeDelta);\n\t                }\n\n\t                sys.tick(time, timeDelta);\n\t                sys.cameras = this.cameras;\n\n\t                for(var b in behaviors) {\n\t                    var behavior = behaviors[b];\n\t                    if (behavior.tock) behavior.tock(time, timeDelta);\n\t                }\n\n\t                sys.tock(time, timeDelta);\n\t            }\n\t        }\n\t    });\n\n\t    window.AFRAME.Effects = fx;\n\t}\n\n\t__webpack_require__(1)\n\t__webpack_require__(3)\n\t__webpack_require__(17)\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(2);\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t// Copyright 2017-2018 Yannis Gravezas <wizgrav@gmail.com> MIT licensed\n\n\tAFRAME.registerSystem(\"effects\", {\n\t    schema: { type: \"array\", default: [] },\n\n\t    init: function () {\n\t        this.effects = {};\n\t        this.passes = [];\n\t        this._passes = [];\n\t        this.cameras = [];\n\t        this.setupPostState();\n\t        this.needsOverride = true;\n\t        this.lightComponents = [];\n\t\t\tthis.LightState = {\n\t\t\t\trows: 0,\n\t\t\t\tcols: 0,\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0,\n\t\t\t\ttileData: { value: null },\n\t\t\t\ttileTexture: { value: null },\n\t\t\t\tlightTexture: {\n\t\t\t\t\tvalue: new THREE.DataTexture( new Float32Array( 32 * 2 * 4 ), 32, 2, THREE.RGBAFormat, THREE.FloatType )\n\t\t\t\t},\n\t\t\t};\n\t    },\n\n\t    update: function () {\n\t        this.needsUpdate = true;\n\t    },\n\t    \n\t    addLight: function (behavior) {\n\t\t\tthis.lightComponents.push(behavior);\n\t\t},\n\t\t\n\t\tremoveLight: function (behavior) {\n\t\t\tvar index = this.lightComponents.indexOf(behavior);\n\t\t\tthis.lightComponents.splice(index);\n\t    },\n\t    \n\t    setupPostState: function () {\n\t        this.renderTarget = new THREE.WebGLRenderTarget(1, 1, { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat });\n\t        this.renderTarget.texture.generateMipmaps = false;\n\t        this.renderTarget.depthBuffer = true;\n\t        this.renderTarget.depthTexture = new THREE.DepthTexture();\n\t        this.renderTarget.depthTexture.type = THREE.UnsignedShortType;\n\t        this.renderTarget.depthTexture.minFilter = THREE.LinearFilter;\n\t        this.renderTarget.stencilBuffer = false;\n\t        this.scene = new THREE.Scene();\n\t        this.camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);\n\t        this.quad = new THREE.Mesh(new THREE.PlaneBufferGeometry(2, 2), null);\n\t        this.quad.frustumCulled = false;\n\t        this.scene.add(this.quad);\n\t        this.sceneLeft = new THREE.Scene();\n\t        this.quadLeft = new THREE.Mesh(new THREE.PlaneBufferGeometry(2, 2), null);\n\t        this.quadLeft.geometry.attributes.uv.array.set([0, 1, 0.5, 1, 0, 0, 0.5, 0]);\n\t        this.quadLeft.frustumCulled = false;\n\t        this.sceneLeft.add(this.quadLeft);\n\t        this.sceneRight = new THREE.Scene();\n\t        this.quadRight = new THREE.Mesh(new THREE.PlaneBufferGeometry(2, 2), null);\n\t        this.quadRight.geometry.attributes.uv.array.set([0.5, 1, 1, 1, 0.5, 0, 1, 0]);\n\t        this.quadRight.frustumCulled = false;\n\t        this.sceneRight.add(this.quadRight);\n\t        this.targets = [\n\t            new THREE.WebGLRenderTarget(1, 1, { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat }),\n\t            new THREE.WebGLRenderTarget(1, 1, { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat })\n\t        ];\n\t        \n\t        this.tDiffuse = {type: \"t\", value: null};\n\t        this.tDepth = {type: \"t\", value: this.renderTarget.depthTexture};\n\t        this.cameraFar = {type: \"f\", value: 0};\n\t        this.cameraNear = {type: \"f\", value: 0};\n\t        this.time = { type: \"f\", value: 0 };\n\t        this.timeDelta = { type: \"f\", value: 0 };\n\t        this.uvClamp = { type: \"v2\", value: this.uvBoth };\n\t        this.resolution = { type: \"v4\", value: new THREE.Vector4() };\n\n\t    },\n\n\t    vertexShader: [\n\t        '#include <common>',\n\t        'varying vec2 vUv;',\n\t        'void main() {',\n\t        '   vUv = uv;',\n\t        '   gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\n\t        '}'\n\t    ].join('\\n'),\n\n\t    uvLeft: new THREE.Vector2(0, 0.5),\n\t    uvRight: new THREE.Vector2(0.5, 1),\n\t    uvBoth: new THREE.Vector2(0, 1),\n\n\t    parseToken: /([#a-z0-9\\-\\_]+)\\.{0,1}([#a-z0-9\\-\\_]*)\\s*\\({0,1}\\s*([\\$a-z0-9\\-\\_\\.\\s]*)\\){0,1}([\\!\\?]{0,1})/i,\n\n\t    renderPass: function (material, renderTarget, viewCb, forceClear){\n\t        var renderer = this.sceneEl.renderer;\n\t        this.quad.material = material;\n\t        var isFn = typeof viewCb === \"function\";\n\t        var s = renderTarget || renderer.getSize();\n\t        this.resolution.value.set(s.width, s.height, 1/s.width, 1/s.height);\n\t        var oldClear = renderer.autoClear;\n\t        renderer.autoClear = false;\n\t        if (viewCb) {\n\t            if (this.cameras.length > 1){\n\t                this.quadLeft.material = material;\n\t                this.uvClamp.value = this.uvLeft;\n\t                setView(0, 0, Math.round(s.width * 0.5), s.height);\n\t                if (isFn) viewCb(material, this.cameras[0], -1);\n\t\t\t\t    renderer.render(this.sceneLeft, this.camera, renderTarget, oldClear || forceClear);        \n\t                \n\t                this.quadRight.material = material;\n\t                this.uvClamp.value = this.uvRight;\n\t                setView(Math.round(s.width * 0.5), 0, Math.round(s.width * 0.5), s.height);\n\t                if (isFn) viewCb(material, this.cameras[1], 1);\n\t                renderer.render( this.sceneRight, this.camera, renderTarget);\n\n\t                this.uvClamp.value = this.uvBoth;\n\t                setView(0, 0, s.width, s.height);\n\t            } else {\n\t                setView(0, 0, s.width, s.height);\n\t                if (isFn) viewCb(material, this.sceneEl.camera, 0);\n\t                renderer.render( this.scene, this.camera, renderTarget, oldClear || forceClear);\n\t            }\n\t        } else {\n\t            setView(0, 0, s.width, s.height);\n\t            renderer.render(this.scene, this.camera, renderTarget, oldClear || forceClear);\n\t        }\n\t        renderer.autoClear = oldClear;\n\t        function setView(x,y,w,h) {\n\t            if (renderTarget) {\n\t                renderTarget.viewport.set( x, y, w, h );\n\t\t\t\t\trenderTarget.scissor.set( x, y, w, h );\n\t            } else {\n\t                renderer.setViewport( x, y, w, h );\n\t\t\t\t\trenderer.setScissor( x, y, w, h );\n\t            }\n\t        }\n\t    },\n\n\t    materialize: function (m) {\n\t        var fs = [\n\t            \"uniform vec2 uvClamp;\",\n\t            \"vec4 textureVR( sampler2D sampler, vec2 uv ) {\",\n\t            \" return texture2D(sampler, vec2(clamp(uv.x, uvClamp.x, uvClamp.y), uv.y));\",\n\t            \"} \",\n\t            m.fragmentShader            \n\t        ].join(\"\\n\");\n\t        \n\t        m.uniforms.uvClamp = this.uvClamp;\n\t        \n\t        return new THREE.ShaderMaterial({\n\t            uniforms: m.uniforms,\n\t            vertexShader: m.vertexShader || this.vertexShader,\n\t            fragmentShader: fs,\n\t            depthWrite: false,\n\t            depthTest: false,\n\t            blending: THREE.NoBlending,\n\t            fog: false,\n\t            extensions: {\n\t                derivatives: true\n\t            },\n\t            defines: m.defines || {}\n\t        });\n\t    },\n\n\t    fuse: function (temp, alpha) {\n\t        if (!temp.length) return;\n\t        var self = this, count=0;\n\t        var chunks = [], head = [], main = [], includes = {}, \n\t            needsDepth = false, needsDiffuse = false, k;\n\t \n\t        var uniforms = {\n\t            time: this.time,\n\t            timeDelta: this.timeDelta,\n\t            resolution: this.resolution\n\t        };\n\n\t        temp.forEach(function (obj) {\n\t            var callMain = true, swapMain = false, args=[];\n\t            if (typeof obj === \"string\") {\n\t                var tok = self.parseToken.exec(obj);\n\t                if(!tok) return;\n\t                \n\t                callMain = tok[4] !== \"!\";\n\t                swapMain = tok[4] === \"?\";\n\t                obj = tok[1];\n\t                var prop = tok[2];\n\t                var temp = {};\n\t                \n\t                if(obj[0] === \"#\") {\n\t                    var el = document.querySelector(obj);\n\t                    if(!el) return;\n\t                    \n\t                    obj = {\n\t                        attrName: [obj.replace(\"#\", \"script_\"), \"_\", (count++), \"_\"].join(\"\"),\n\t                        fragment: prop ? \n\t                            (el[prop] instanceof Document ? el[prop].body.textContent : el[prop]) \n\t                            : el.textContent,\n\t                        depth: el.dataset.depth !== undefined,\n\t                        diffuse: el.dataset.diffuse !== undefined,\n\t                        includes: el.dataset.includes ? el.dataset.includes.trim().split(\" \") : null,\n\t                        defaults: el.dataset.defaults ? el.dataset.defaults.trim().split(\" \") : null\n\t                    };\n\t                } else {\n\t                    obj = self.effects[obj];\n\t                    if (!obj) return;\n\t                    if (prop) {\n\t                        obj = obj.exports ? obj.exports[prop] : null;\n\t                        if (!obj) return;\n\t                        obj.attrName = tok[1] + \"_\" + prop + \"_\";\n\t                    }\n\t                }\n\t                if (tok[3]) {\n\t                    args = tok[3].trim().split(\" \");\n\t                }\n\t            }\n\t            var prefix = (obj.attrName ? obj.attrName : \"undefined_\" + (count++)) + \"_\";\n\t            prefix = prefix.replace(\"__\",\"_\");\n\t            if (obj.defaults) {\n\t                obj.defaults.forEach(function (d, i) {\n\t                    var v = args[i];\n\t                    chunks.push([\"#define $\", i, \" \", v  && v !== \"$\" ? v : d ].join(\"\").replace(/\\$/g, prefix).replace(\"__\",\"_\"));\n\t                });\n\t            }\n\t            if (obj.diffuse) { needsDiffuse = true; }\n\t            if (obj.depth) { needsDepth = true; }\n\t            if (obj.fragment) { chunks.push(obj.fragment.replace(/\\$/g, prefix)); }\n\t            if (obj.uniforms) {\n\t                for (var u in obj.uniforms) {\n\t                    uniforms[prefix + u] = obj.uniforms[u];\n\t                }\n\t            };\n\t            if (obj.includes) {\n\t                obj.includes.forEach(function (inc) {\n\t                    includes[inc] = true;\n\t                });\n\t            }\n\t            if (callMain) {\n\t                main.push([\"  \", prefix, \"main(\", ( swapMain ? \"origColor, color\": \"color, origColor\"), \", vUv, depth);\"].join(\"\"));\n\t            }\n\t        });\n\t        var t2u = { \"i\": \"int\", \"f\": \"float\", \"t\": \"sampler2D\",\n\t            \"v2\": \"vec2\", \"v3\": \"vec3\", \"c\": \"vec3\",\"v4\": \"vec4\", \n\t            \"m2\": \"mat2\", \"m3\":\"mat3\", \"m4\": \"mat4\", \"b\": \"bool\" };\n\n\t        for(k in includes) { head.push(\"#include <\" + k + \">\"); }\n\t        \n\t        var premain = [\n\t            \"void main () {\" \n\t        ];\n\t        uniforms[\"tDiffuse\"] = this.tDiffuse;\n\t             \n\t        if (needsDiffuse){\n\t             premain.push(\"  vec4 color = texture2D(tDiffuse, vUv);\"); \n\t        } else {\n\t             premain.push(\"  vec4 color = vec4(0.0);\"); \n\t        }\n\t        premain.push(\"  vec4 origColor = color;\"); \n\t        \n\t        uniforms[\"tDepth\"] = this.tDepth;\n\t        uniforms[\"cameraFar\"] = this.cameraFar;\n\t        uniforms[\"cameraNear\"] = this.cameraNear;\n\t            \n\t        if (needsDepth){\n\t            premain.push(\"  float depth = texture2D(tDepth, vUv).x;\");\n\t        } else {\n\t            premain.push(\"  float depth = 0.0;\");\n\t        }\n\t        \n\t        for(k in uniforms) {\n\t            var u = uniforms[k];\n\t            head.push([\"uniform\", t2u[u.type], k, \";\"].join(\" \"));\n\t        }\n\t        \n\t        head.push(\"varying vec2 vUv;\");\n\t        var source = [\n\t            head.join(\"\\n\"), chunks.join(\"\\n\"), \"\\n\",\n\t                premain.join(\"\\n\"), main.join(\"\\n\"), \n\t                alpha ? \"  gl_FragColor = color;\" : \"  gl_FragColor = vec4(color.rgb, 1.0);\", \"}\"\n\t        ].join(\"\\n\");\n\n\t        var material = this.materialize({\n\t            fragmentShader: source, \n\t            uniforms: uniforms\n\t        });\n\n\t        if(this.sceneEl.components.debug) console.log(source, material);\n\t        return material;\n\t    },\n\n\t    rebuild: function () {\n\t        var self = this, passes = [], temp = [];\n\t        this.passes.forEach(function(pass){\n\t            if (pass.dispose) pass.dispose();\n\t        });\n\t        this.data.forEach(function (k) {\n\t            if(!k){\n\t                pickup();\n\t                return;\n\t            }\n\t            var obj, name;\n\t            var tok = self.parseToken.exec(k);\n\t            if(!tok || !tok[1]) return;\n\t            name = tok[1];\n\t            obj = self.effects[name];\n\t            if (!obj){\n\t                temp.push(k);\n\t                return;\n\t            }\n\t            if (obj.pass) {\n\t                pickup();\n\t                passes.push({ pass: obj.pass, behavior: obj } );\n\t            } else if (obj.material){\n\t                pickup();\n\t                passes.push({ pass: makepass(obj.material, false, obj.vr), behavior: obj });\n\t            } else {\n\t                temp.push(k);\n\t            }          \n\t        });\n\n\t        function pickup () {\n\t            if (!temp.length) return;\n\t            passes.push({ pass: makepass(self.fuse(temp), true)});\n\t            temp = [];\n\t        }\n\n\t        function makepass (material, dispose, viewCb) {\n\t            return {\n\t                render: function(renderer, writeBuffer, readBuffer){\n\t                    self.renderPass(material, writeBuffer, viewCb);\n\t                },\n\n\t                dispose: function () {\n\t                    if (dispose) material.dispose();\n\t                }\n\t            }\n\t        }\n\t        pickup();\n\t        this.needsUpdate = false;\n\t        this.passes = passes;\n\t    },\n\n\t    isActive: function (behavior, resize) {\n\t        var scene = this.sceneEl;\n\t        if (behavior.bypass) return false;\n\t        var isEnabled = scene.renderTarget ? true : false;\n\t        if (!isEnabled) return false;\n\t        if (resize && (this.needsResize || behavior.needsResize) && behavior.setSize) {\n\t            var size = scene.renderer.getSize();\n\t            behavior.setSize(size.width, size.height);\n\t            delete behavior.needsResize;\n\t        }\n\t        return true;\n\t    },\n\n\t    register: function (behavior) {\n\t        this.effects[behavior.attrName] = behavior;\n\t        this.needsUpdate = true;\n\t    },\n\n\t    unregister: function (behavior) {\n\t        delete this.effects[behavior.attrName];\n\t        this.needsUpdate = true;\n\t    },\n\n\t    tick: function (time, timeDelta) {\n\t        var self = this, sceneEl = this.sceneEl, renderer = sceneEl.renderer, effect = sceneEl.effect, \n\t            rt = this.renderTarget, rts = this.targets, scene = sceneEl.object3D;\n\t        if(!rt || !renderer) { return; }\n\t        if (this.needsOverride) {\n\t            if(scene.onBeforeRender) {\n\t                scene.onBeforeRender = function (renderer, scene, camera) {\n\t                    var size = renderer.getSize();\n\t                    if (size.width !== rt.width || size.height !== rt.height) {\n\t                        rt.setSize(size.width, size.height);\n\t                        rts[0].setSize(size.width, size.height);\n\t                        rts[1].setSize(size.width, size.height);\n\t                        self.resolution.value.set(size.width, size.height, 1/size.width, 1/size.height);\n\t                        self.needsResize = true;\n\t                        self.resizeTiles();\n\t                    }\n\t                    if(camera instanceof THREE.ArrayCamera) {\n\t                        self.cameras = camera.cameras;\n\t                    } else {\n\t                        self.cameras.push(camera);\n\t                    }\n\t                    self.tileLights(renderer, scene, camera);\n\t                }\n\t            } else {\n\t                var rendererRender = renderer.render;\n\t                renderer.render = function (scene, camera, renderTarget, forceClear) {\n\t                    if (renderTarget === rt) {\n\t                        var size = renderer.getSize();\n\t                        if (size.width !== rt.width || size.height !== rt.height) {\n\t                            rt.setSize(size.width, size.height);\n\t                            rts[0].setSize(size.width, size.height);\n\t                            rts[1].setSize(size.width, size.height);\n\t                            self.resolution.value.set(size.width, size.height, 1/size.width, 1/size.height);\n\t                            self.needsResize = true;\n\t                        }\n\t                        self.cameras.push(camera);\n\t                    }\n\t                    rendererRender.call(renderer, scene, camera, renderTarget, forceClear);\n\t                }\n\t            }        \n\t            this.needsOverride = false;\n\t        }\n\t        this.cameras = [];\n\t        this.time.value = time / 1000;\n\t        this.timeDelta.value = timeDelta / 1000;\n\n\t        if (this.needsUpdate === true) { this.rebuild(); }\n\n\t       this.setupPasses();\n\n\t        this.tDiffuse.value = this.renderTarget.texture;\n\t        this.tDepth.value = this.renderTarget.depthTexture;\n\t        var camera = this.sceneEl.camera;\n\t        this.cameraFar.value = camera.far;\n\t        this.cameraNear.value = camera.near;                \n\t    },\n\n\t    setupPasses : function () {\n\t        var arr = [], rt = this.renderTarget;\n\t        this.passes.forEach(function (p) {\n\t            if (p.behavior && p.behavior.bypass === true) return;\n\t            arr.push(p);\n\t        });\n\t        this.sceneEl.renderTarget = arr.length && this.sceneEl.isPlaying ? rt : null;\n\t        this._passes = arr;\n\t    },\n\t    tock: function () {\n\t        var scene = this.sceneEl, renderer = scene.renderer, self = this;\n\t        if(!scene.renderTarget) { return; }\n\t        var rt = scene.renderTarget, rts = this.targets;\n\t        this._passes.forEach(function (pass, i) {\n\t            var r = i ? rts[i & 1] : rt;\n\t            self.tDiffuse.value = r.texture;   \n\t            if (pass.behavior && pass.behavior.resize) self.isActive(pass.behavior, true);\n\t            pass.pass.render(renderer, i < self._passes.length - 1 ? rts[(i+1) & 1] : null, r);\n\t        });\n\t        this.needsResize = false;\n\t    },\n\n\t    resizeTiles: function () {\n\t        var LightState = this.LightState;\n\t        var width = LightState.width;\n\t        var height = LightState.height;\n\t        LightState.cols = Math.ceil( width / 32 );\n\t        LightState.rows = Math.ceil( LightState.height / 32 );\n\t        LightState.tileData.value = [ width, height, 0.5 / Math.ceil( width / 32 ), 0.5 / Math.ceil( height / 32 ) ];\n\t        LightState.tileTexture.value = new THREE.DataTexture( new Uint8Array( LightState.cols * LightState.rows * 4 ), LightState.cols, LightState.rows );\n\t    },\n\t    \n\t    tileLights: function ( renderer, scene, camera ) {\n\t        if ( ! camera.projectionMatrix ) return;\n\t        var LightState = this.LightState, lights = this.lightComponents;\n\t        var size = renderer.getSize();\n\t        var d = LightState.tileTexture.value.image.data;\n\t        var ld = LightState.lightTexture.value.image.data;\n\t        var viewMatrix = camera.matrixWorldInverse;\n\t        d.fill( 0 );\n\t        var vector = new THREE.Vector3();\n\n\t        var passes;\n\t        if(camera instanceof THREE.ArrayCamera) {\n\t            passes = [ [0.5, 0, camera.cameras[0]], [0.5, 0.5, camera.cameras[1]]];\n\t        } else {\n\t            passes = [1.0, 0, camera];\n\t        }\n\t        passes.forEach(function(pass){\n\t            lights.forEach( function ( light, index ) {\n\t                vector.setFromMatrixPosition( light.el.object3D.matrixWorld );\n\t                var pw = LightState.width * pass[0];\n\t                var pm = LightState.width * pass[1];\n\t                var bs = self.lightBounds( pass[2], vector, light.data.radius, pw );\n\t                vector.applyMatrix4( viewMatrix );\n\t                vector.toArray( ld, 4 * index );\n\t                ld[ 4 * index + 3 ] = light.data.radius;\n\t                light.data.color.toArray( ld, 32 * 4 + 4 * index );\n\t                ld[ 32 * 4 + 4 * index + 3 ] = light.data.decay;\n\t                if ( bs[ 1 ] < 0 || bs[ 0 ] > pw || bs[ 3 ] < 0 || bs[ 2 ] > LightState.height ) return;\n\t                if ( bs[ 0 ] < 0 ) bs[ 0 ] = 0;\n\t                if ( bs[ 1 ] > pw ) bs[ 1 ] = pw;\n\t                if ( bs[ 2 ] < 0 ) bs[ 2 ] = 0;\n\t                if ( bs[ 3 ] > LightState.height ) bs[ 3 ] = LightState.height;\n\t                var i4 = Math.floor( index / 8 ), i8 = 7 - ( index % 8 );\n\t                for ( var i = Math.floor( bs[ 2 ] / 32 ); i <= Math.ceil( bs[ 3 ] / 32 ); i ++ ) {\n\t                    for ( var j = Math.floor( (bs[ 0 ] + pm) / 32  ); j <= Math.ceil( (bs[ 1 ] + pm) / 32 ); j ++ ) {\n\t                        d[ ( LightState.cols * i + j ) * 4 + i4 ] |= 1 << i8;\n\t                    }\n\t                }\n\t            } );\n\t        });\n\t        LightState.tileTexture.value.needsUpdate = true;\n\t        LightState.lightTexture.value.needsUpdate = true;\n\t    },\n\t    \n\t    lightBounds: function () {  \n\t        let v = new THREE.Vector3();\n\t        return function ( camera, pos, r, w ) {\n\t            var LightState = this.LightState;\n\t            var minX = w, maxX = 0, minY = LightState.height, maxY = 0, hw = w / 2, hh = LightState.height / 2;\n\t            for ( var i = 0; i < 8; i ++ ) {\n\t                v.copy( pos );\n\t                v.x += i & 1 ? r : - r;\n\t                v.y += i & 2 ? r : - r;\n\t                v.z += i & 4 ? r : - r;\n\t                var vector = v.project( camera );\n\t                var x = ( vector.x * hw ) + hw;\n\t                var y = ( vector.y * hh ) + hh;\n\t                minX = Math.min( minX, x );\n\t                maxX = Math.max( maxX, x );\n\t                minY = Math.min( minY, y );\n\t                maxY = Math.max( maxY, y );\n\t            }\n\t            return [ minX, maxX, minY, maxY ];\n\t    };\n\t    }()\n\t});\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(4);\n\t__webpack_require__(5);\n\t__webpack_require__(6);\n\t__webpack_require__(8);\n\t__webpack_require__(10);\n\t__webpack_require__(11);\n\t__webpack_require__(12);\n\t__webpack_require__(13);\n\t__webpack_require__(16);\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\t// Sobel and freichen shaders from three.js examples\n\n\tAFRAME.registerComponent(\"outline\", {\n\t\tmultiple: true,\n\n\t    schema: {\n\t\t\tenabled: { default: true },\n\t        color: { type: \"color\", default: \"#000000\" },\n\t\t\twidth: { type: \"vec2\", default: new THREE.Vector2(1,1) },\n\t\t\trange: { type: \"vec2\", default: new THREE.Vector2(0,1500) },\n\t\t\tstrength: {type: \"number\", default: 1},\n\t\t\tratio: { type: \"number\", default: 0.5 },\n\t\t\tsmooth: { default: false }  \n\t\t},\n\n\t    init: function () {\n\t        this.system = this.el.sceneEl.systems.effects;\n\t\t\tvar pars = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat };\n\t        this.renderTarget = new THREE.WebGLRenderTarget( 1, 1, pars );\n\t\t\tthis.blurTarget = new THREE.WebGLRenderTarget( 1, 1, pars );\n\t\t\tthis.needsResize = true;\n\t\t\tthis.resolution = { type: \"v4\", value: new THREE.Vector4()};\n\t\t\tthis.tockUniforms = {\n\t\t\t\tresolution: this.resolution,\n\t            color: { type: \"c\", value: new THREE.Color() },\n\t\t\t\twidth: { type: \"v2\", value: null },\n\t\t\t\trange: { type: \"v2\", value: null },\n\t\t\t\tstrength: { type: \"f\", value: 1 }\n\t        };\n\t\t\t\n\t\t\tthis.blurDirection = { type: \"v2\", value: new THREE.Vector2()};\n\t\t\t\n\t\t\tthis.exports = {\n\t\t\t\tsobel: {\n\t\t\t\t\tfragment: this.sobel,\n\t\t\t\t\tuniforms: this.tockUniforms,\n\t\t\t\t\tincludes: [\"packing\"],\n\t\t\t\t\tdepth: true\n\t\t\t\t},\n\n\t\t\t\tblur: {\n\t\t\t\t\tfragment: this.blur,\n\t\t\t\t\tuniforms: { resolution: this.tockUniforms.resolution, direction: this.blurDirection },\n\t\t\t\t\tdiffuse: true\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.currentMaterial = this.system.fuse([this.exports.sobel], true);\n\n\t\t\t\n\t\t\tthis.blurMaterial = this.system.fuse([this.exports.blur], true);\n\n\t\t\tthis.uniforms = {\n\t\t\t\ttexture: { type: \"t\", value: this.renderTarget.texture }\n\t\t\t}\n\t\t\t\n\t\t\tthis.system.register(this);\n\t    },\n\n\t    update: function (oldData) {\n\t\t\tthis.bypass = !this.data.enabled;\n\t        this.tockUniforms.color.value.set(this.data.color);\n\t\t\tthis.tockUniforms.width.value = this.data.width;\n\t\t\tthis.tockUniforms.range.value = this.data.range;\n\t\t\tthis.tockUniforms.strength.value = 1 / this.data.strength;\n\t    },\n\n\t\tsetSize: function(w, h) {\n\t\t\tw = Math.round(w * this.data.ratio);\n\t\t\th = Math.round(h * this.data.ratio);\n\t\t\tthis.renderTarget.setSize(w,h);\n\t\t\tthis.blurTarget.setSize(w,h);\n\t\t\tthis.resolution.value.set(w, h, 1/w, 1/h);\n\t\t},\n\n\t\ttock: function () {\n\t\t\tif (!this.system.isActive(this, true)) return;\n\t\t\tthis.system.renderPass(this.currentMaterial, this.renderTarget);\n\t\t\tthis.system.tDiffuse.value = this.renderTarget;\n\t\t\tif (!this.data.smooth) return;\n\t\t\tthis.blurDirection.value.set(1,0);\n\t\t\tthis.system.renderPass(this.blurMaterial, this.blurTarget);\n\t\t\tthis.system.tDiffuse.value = this.blurTarget;\n\t\t\tthis.blurDirection.value.set(0,1);\n\t\t\tthis.system.renderPass(this.blurMaterial, this.renderTarget);\n\t\t},\n\n\t    remove: function () {\n\t        this.system.unregister(this);\n\t    },\n\n\t    diffuse: true,\n\n\t    sobel: [\n\t\t\t\"mat3 $G[2];\",\n\n\t\t\t\"const mat3 $g0 = mat3( 1.0, 2.0, 1.0, 0.0, 0.0, 0.0, -1.0, -2.0, -1.0 );\",\n\t\t\t\"const mat3 $g1 = mat3( 1.0, 0.0, -1.0, 2.0, 0.0, -2.0, 1.0, 0.0, -1.0 );\",\n\n\n\t\t\t\"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth) {\",\n\t\t\t\n\t\t\t\t\"vec3 I[3];\",\n\t\t\t\t\"float cnv[2];\",\n\t\t\t\t\"float d;\",\n\n\t\t\t\t\"$G[0] = $g0;\",\n\t\t\t\t\"$G[1] = $g1;\",\n\n\t\t\t\t\"for (float i=0.0; i<3.0; i++)\",\n\t\t\t\t\"for (float j=0.0; j<3.0; j++) {\",\n\t\t\t\"           d = texture2D(tDepth, uv + resolution.zw * vec2(i-1.0,j-1.0) ).x;\",\n\t        \"           d = perspectiveDepthToViewZ(d, cameraNear, cameraFar); \",\n\t\t\t\"\t\t\tI[int(i)][int(j)] = viewZToOrthographicDepth(d, cameraNear, cameraFar);\",\n\t\t\t\t\"}\",\n\n\t\t\t\t\"for (int i=0; i<2; i++) {\",\n\t\t\t\t\t\"float dp3 = dot($G[i][0], I[0]) + dot($G[i][1], I[1]) + dot($G[i][2], I[2]);\",\n\t\t\t\t\t\"cnv[i] = dp3 * dp3; \",\n\t\t\t\t\"}\",\n\t\t\t\t\"color = vec4($color, sqrt(cnv[0]*cnv[0]+cnv[1]*cnv[1]));\",\n\t\t\t\"} \"\n\t\t].join(\"\\n\"),\n\n\t\tblur: [\n\t\t\t\"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth){\",\n\t\t\t\"color.a *= 0.44198;\",\n\t\t\t\"color.a += texture2D(tDiffuse, uv + ($direction * $resolution.zw )).a * 0.27901;\",\n\t\t\t\"color.a += texture2D(tDiffuse, uv - ($direction * $resolution.zw )).a * 0.27901;\",\n\t\t\t\"}\"\n\t\t].join(\"\\n\"),\n\n\t\tfragment: [\n\t        \"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth){\",\n\t        \"\tvec4 texel = texture2D($texture, uv);\",\n\t\t\t\"   color.rgb = mix(color.rgb, texel.rgb, smoothstep(0.1,0.3,texel.a));\",\n\t        \"}\"\n\t    ].join(\"\\n\")\n\t});\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\t// Ported from the standard shader in Three.js examples\n\n\tAFRAME.registerComponent(\"film\", {\n\t    multiple: true,\n\n\t    schema: {\n\t        \"speed\":       { default: 1.0 },\n\t        \"nIntensity\": { default: 0.5 },\n\t        \"sIntensity\": { default: 0.05 },\n\t        \"sCount\":     { default: 4096 }\n\t\t},\n\n\t    init: function () {\n\t        this.uniforms = {\n\t            \"speed\":       { type: \"f\", value: 0.0 },\n\t            \"nIntensity\": { type: \"f\", value: 0.5 },\n\t            \"sIntensity\": { type: \"f\", value: 0.05 },\n\t            \"sCount\":     { type: \"f\", value: 4096 }\n\t\t    };\n\t        this.system = this.el.sceneEl.systems.effects;\n\t        this.system.register(this);\n\t    },\n\n\t    update: function () {\n\t        var d = this.data, us =  this.uniforms;\n\t        for(var u in us) {\n\t            if(d[u]) us[u].value = d[u]; \n\t        }\n\t    },\n\n\t    remove: function () {\n\t        this.system.unregister(this);\n\t    },\n\n\t    includes: [\"common\"],\n\n\t    diffuse: true,\n\n\t    fragment: [\n\t\t\t\"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth) {\",\n\t\t\t\"   vec4 cTextureScreen = color;\",\n\t\t\t\"   float dx = rand( uv + mod(time, 3.14) * $speed );\",\n\t\t\t\"   vec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx, 0.0, 1.0 );\",\n\t\t\t\"   vec2 sc = vec2( sin( uv.y * $sCount ), cos( uv.y * $sCount ) );\",\n\t\t\t\"   cResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * $sIntensity;\",\n\t        \"   cResult = cTextureScreen.rgb + clamp( $nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );\",\n\t\t\t\"   color.rgb =  cResult; //cResult;\",\n\t\t\t\"}\"\n\t\t].join( \"\\n\" )\n\t});\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// Uses matdesl's three-fxaa-shader\n\n\tvar FXAAShader = __webpack_require__(7);\n\n\tAFRAME.registerComponent(\"fxaa\", {\n\t    schema: { default: true },\n\n\t    init: function () {\n\t        this.system = this.el.sceneEl.systems.effects;\n\t        this.material = new THREE.ShaderMaterial({\n\t            fragmentShader: FXAAShader.fragmentShader,\n\t            vertexShader: FXAAShader.vertexShader,\n\t            uniforms: {\n\t                tDiffuse: this.system.tDiffuse,\n\t                resolution: { type: 'v2', value: new THREE.Vector2() }\n\t            }\n\t        });\n\t        this.system.register(this);\n\t        this.needsResize = true;\n\t    },\n\n\t    update: function () {\n\t        this.bypass = !this.data;\n\t    },\n\n\t    setSize: function (w, h) {\n\t        this.material.uniforms.resolution.value.set(w, h);\n\t    },\n\n\t    resize: true,\n\n\t    remove: function () {\n\t        this.material.dispose();\n\t        this.system.unregister(this);\n\t    }\n\t});\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\t\n\t// Adapted from https://github.com/mattdesl/three-shader-fxaa\n\tmodule.exports =  {\n\t  uniforms: {\n\t    tDiffuse: { type: 't', value: null },\n\t    resolution: { type: 'v2', value: new THREE.Vector2() }\n\t  },\n\t  vertexShader: \"#define GLSLIFY 1\\nvarying vec2 vUv;\\n\\nvarying vec2 v_rgbNW;\\nvarying vec2 v_rgbNE;\\nvarying vec2 v_rgbSW;\\nvarying vec2 v_rgbSE;\\nvarying vec2 v_rgbM;\\n\\nuniform vec2 resolution;\\n\\nvoid main() {\\n  vUv = uv;\\n  vec2 fragCoord = uv * resolution;\\n  vec2 inverseVP = 1.0 / resolution.xy;\\n  v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\\n  v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\\n  v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\\n  v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\\n  v_rgbM = vec2(fragCoord * inverseVP);\\n\\n  gl_Position = projectionMatrix *\\n              modelViewMatrix *\\n              vec4(position,1.0);\\n}\\n\",\n\t  fragmentShader: \"#define GLSLIFY 1\\nvarying vec2 vUv;\\n\\n//texcoords computed in vertex step\\n//to avoid dependent texture reads\\nvarying vec2 v_rgbNW;\\nvarying vec2 v_rgbNE;\\nvarying vec2 v_rgbSW;\\nvarying vec2 v_rgbSE;\\nvarying vec2 v_rgbM;\\n\\n//make sure to have a resolution uniform set to the screen size\\nuniform vec2 resolution;\\nuniform sampler2D tDiffuse;\\n\\n/**\\nBasic FXAA implementation based on the code on geeks3d.com with the\\nmodification that the texture2DLod stuff was removed since it's\\nunsupported by WebGL.\\n\\n--\\n\\nFrom:\\nhttps://github.com/mitsuhiko/webgl-meincraft\\n\\nCopyright (c) 2011 by Armin Ronacher.\\n\\nSome rights reserved.\\n\\nRedistribution and use in source and binary forms, with or without\\nmodification, are permitted provided that the following conditions are\\nmet:\\n\\n    * Redistributions of source code must retain the above copyright\\n      notice, this list of conditions and the following disclaimer.\\n\\n    * Redistributions in binary form must reproduce the above\\n      copyright notice, this list of conditions and the following\\n      disclaimer in the documentation and/or other materials provided\\n      with the distribution.\\n\\n    * The names of the contributors may not be used to endorse or\\n      promote products derived from this software without specific\\n      prior written permission.\\n\\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\\n\\\"AS IS\\\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\\n*/\\n\\n#ifndef FXAA_REDUCE_MIN\\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\\n#endif\\n#ifndef FXAA_REDUCE_MUL\\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\\n#endif\\n#ifndef FXAA_SPAN_MAX\\n    #define FXAA_SPAN_MAX     8.0\\n#endif\\n\\n//optimized version for mobile, where dependent \\n//texture reads can be a bottleneck\\nvec4 fxaa_1540259130(sampler2D tex, vec2 fragCoord, vec2 resolution,\\n            vec2 v_rgbNW, vec2 v_rgbNE, \\n            vec2 v_rgbSW, vec2 v_rgbSE, \\n            vec2 v_rgbM) {\\n    vec4 color;\\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\\n    vec4 texColor = texture2D(tex, v_rgbM);\\n    vec3 rgbM  = texColor.xyz;\\n    vec3 luma = vec3(0.299, 0.587, 0.114);\\n    float lumaNW = dot(rgbNW, luma);\\n    float lumaNE = dot(rgbNE, luma);\\n    float lumaSW = dot(rgbSW, luma);\\n    float lumaSE = dot(rgbSE, luma);\\n    float lumaM  = dot(rgbM,  luma);\\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\\n    \\n    mediump vec2 dir;\\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\\n    \\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\\n    \\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\\n              dir * rcpDirMin)) * inverseVP;\\n    \\n    vec3 rgbA = 0.5 * (\\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\\n\\n    float lumaB = dot(rgbB, luma);\\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\\n        color = vec4(rgbA, texColor.a);\\n    else\\n        color = vec4(rgbB, texColor.a);\\n    return color;\\n}\\n\\nvoid main() {\\n  vec2 fragCoord = vUv * resolution;   \\n  gl_FragColor = fxaa_1540259130(tDiffuse, fragCoord, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\\n}\\n\"\n\t}\n\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// Adapted from spidersharma UnrealBloomPass\n\tvar LuminosityHighPassShader = __webpack_require__(9);\n\n\tvar BlurDirectionX = new THREE.Vector2( 1.0, 0.0 );\n\tvar BlurDirectionY = new THREE.Vector2( 0.0, 1.0 );\n\n\tAFRAME.registerComponent(\"bloom\", {\n\t\tmultiple: true,\n\n\t    schema: {\n\t\t\tenable: { default: true},\n\t        strength: { default: 1 },\n\t        radius: { default: 0.4 },\n\t        threshold: { default: 0.8 },\n\t\t\tfilter: { type: \"array\", default: [] }\n\t    },\n\n\t    init: function () {\n\t        this.system = this.el.sceneEl.systems.effects;\n\t        var pars = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat };\n\t        this.renderTargetsHorizontal = [];\n\t        this.renderTargetsVertical = [];\n\t        this.nMips = 5;\n\t        \n\t        this.renderTargetBright = new THREE.WebGLRenderTarget( 1, 1, pars );\n\t        this.renderTargetBright.texture.name = \"UnrealBloomPass.bright\";\n\t        this.renderTargetBright.texture.generateMipmaps = false;\n\n\t        for( var i=0; i<this.nMips; i++) {\n\n\t            var renderTarget = new THREE.WebGLRenderTarget( 1, 1, pars );\n\n\t            renderTarget.texture.name = \"UnrealBloomPass.h\" + i;\n\t            renderTarget.texture.generateMipmaps = false;\n\n\t            this.renderTargetsHorizontal.push(renderTarget);\n\n\t            var renderTarget = new THREE.WebGLRenderTarget( 1, 1, pars );\n\n\t            renderTarget.texture.name = \"UnrealBloomPass.v\" + i;\n\t            renderTarget.texture.generateMipmaps = false;\n\n\t            this.renderTargetsVertical.push(renderTarget);\n\n\t        }\n\n\t        // luminosity high pass material, accessable as bloom.filter\n\n\t\t\tthis.exports = {\n\t\t\t\t\"filter\": {\n\t\t\t\t\tuniforms: {\n\t\t\t\t\t\t\"luminosityThreshold\": { type: \"f\", value: 1.0 },\n\t\t\t\t\t\t\"smoothWidth\": { type: \"f\", value: 0.01 },\n\t\t\t\t\t\t\"defaultColor\": { type: \"c\", value: new THREE.Color( 0x000000 ) },\n\t\t\t\t\t\t\"defaultOpacity\":  { type: \"f\", value: 1.0 }\n\t\t\t\t\t},\n\t\t\t\t\tdiffuse: true,\n\t\t\t\t\tfragment: [\n\t\t\t\t\t\t\"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth) {\",\n\t\t\t\t\t\t\t\"vec4 texel = color;\",\n\t\t\t\t\t\t\t\"float v = dot( texel.xyz, vec3( 0.299, 0.587, 0.114 ) );\",\n\t\t\t\t\t\t\t\"vec4 outputColor = vec4( $defaultColor.rgb, $defaultOpacity );\",\n\t\t\t\t\t\t\t\"float alpha = smoothstep( $luminosityThreshold, $luminosityThreshold + $smoothWidth, v );\",\n\t\t\t\t\t\t\t\"color = mix( outputColor, texel, alpha );\",\n\t\t\t\t\t\t\"}\"\n\t\t\t\t\t].join(\"\\n\")\n\t\t\t\t}\n\t\t\t}\n\n\t        this.materialHighPassFilter = null;\n\t        // Gaussian Blur Materials\n\t        this.separableBlurMaterials = [];\n\t        var kernelSizeArray = [3, 5, 7, 9, 11];\n\t        \n\t        for( var i=0; i<this.nMips; i++) {\n\n\t            this.separableBlurMaterials.push(this.getSeperableBlurMaterial(kernelSizeArray[i]));\n\n\t            this.separableBlurMaterials[i].uniforms[ \"texSize\" ].value = new THREE.Vector2(1, 1);\n\n\t        }\n\n\t        // Composite material\n\t        this.compositeMaterial = this.getCompositeMaterial(this.nMips);\n\t        this.compositeMaterial.uniforms[\"blurTexture1\"].value = this.renderTargetsVertical[0].texture;\n\t        this.compositeMaterial.uniforms[\"blurTexture2\"].value = this.renderTargetsVertical[1].texture;\n\t        this.compositeMaterial.uniforms[\"blurTexture3\"].value = this.renderTargetsVertical[2].texture;\n\t        this.compositeMaterial.uniforms[\"blurTexture4\"].value = this.renderTargetsVertical[3].texture;\n\t        this.compositeMaterial.uniforms[\"blurTexture5\"].value = this.renderTargetsVertical[4].texture;\n\t        this.compositeMaterial.needsUpdate = true;\n\n\t        var bloomFactors = [1.0, 0.8, 0.6, 0.4, 0.2];\n\t        this.compositeMaterial.uniforms[\"bloomFactors\"].value = bloomFactors;\n\t        this.bloomTintColors = [new THREE.Vector3(1,1,1), new THREE.Vector3(1,1,1), new THREE.Vector3(1,1,1)\n\t                                                    ,new THREE.Vector3(1,1,1), new THREE.Vector3(1,1,1)];\n\t        this.compositeMaterial.uniforms[\"bloomTintColors\"].value = this.bloomTintColors;\n\t\t\tthis.oldClearColor = new THREE.Color();\n\t        this.uniforms = {\n\t            \"texture\": { type: \"t\", value: this.renderTargetsHorizontal[0] }\n\t        }\n\t        this.needsResize = true;\n\t        this.system.register(this);\n\t    },\n\n\t\tupdate: function (oldData) {\n\t\t\tif (oldData.filter !== this.data.filter) {\n\t\t\t\tif (this.materialHighPassFilter) this.materialHighPassFilter.dispose();\n\t\t\t\tvar chain = this.data.filter.length ? this.data.filter : [this.exports.filter];\n\t\t\t\tthis.materialHighPassFilter = this.system.fuse(chain, false);\n\t\t\t}\n\t\t},\n\n\t    tock: function (time) {\n\t        if (!this.data.enable || !this.system.isActive(this, true)) return;\n\t\t\tvar scene = this.el.sceneEl;\n\t\t\tvar renderer = scene.renderer;\n\t        var readBuffer = scene.renderTarget;\n\t        this.oldClearColor.copy( renderer.getClearColor() );\n\t\t\tthis.oldClearAlpha = renderer.getClearAlpha();\n\t\t\tvar oldAutoClear = renderer.autoClear;\n\t\t\trenderer.autoClear = false;\n\n\t\t\trenderer.setClearColor( new THREE.Color( 0, 0, 0 ), 0 );\n\n\t\t\t// 1. Extract Bright Areas\n\t\t\tthis.system.tDiffuse.value = readBuffer.texture;\n\t\t\tthis.exports.filter.uniforms[ \"luminosityThreshold\" ].value = this.data.threshold;\n\t\t\tthis.system.renderPass(this.materialHighPassFilter, this.renderTargetBright, null, false);\n\n\t\t\t// 2. Blur All the mips progressively\n\t\t\tvar inputRenderTarget = this.renderTargetBright;\n\n\t\t\tfor(var i=0; i<this.nMips; i++) {\n\t\t\n\t\t\t\tthis.separableBlurMaterials[i].uniforms[ \"colorTexture\" ].value = inputRenderTarget.texture;\n\n\t\t\t\tthis.separableBlurMaterials[i].uniforms[ \"direction\" ].value = BlurDirectionX;\n\n\t            this.system.renderPass(this.separableBlurMaterials[i], this.renderTargetsHorizontal[i], true);\n\n\t\t\t\tthis.separableBlurMaterials[i].uniforms[ \"colorTexture\" ].value = this.renderTargetsHorizontal[i].texture;\n\n\t\t\t\tthis.separableBlurMaterials[i].uniforms[ \"direction\" ].value = BlurDirectionY;\n\n\t\t\t\tthis.system.renderPass(this.separableBlurMaterials[i], this.renderTargetsVertical[i], true);\n\n\t\t\t\tinputRenderTarget = this.renderTargetsVertical[i];\n\t\t\t}\n\n\t\t\t// Composite All the mips\n\t\t\tthis.compositeMaterial.uniforms[\"bloomStrength\"].value = this.data.strength;\n\t\t\tthis.compositeMaterial.uniforms[\"bloomRadius\"].value = this.data.radius;\n\t\t\tthis.compositeMaterial.uniforms[\"bloomTintColors\"].value = this.bloomTintColors;\n\t        this.system.renderPass(this.compositeMaterial, this.renderTargetsHorizontal[0], null);\n\n\t\t\trenderer.setClearColor( this.oldClearColor, this.oldClearAlpha );\n\t\t\trenderer.autoClear = oldAutoClear;\n\t\t},\n\n\t    setSize: function ( width, height ) {\n\n\t\t\tvar resx = Math.round(width/2);\n\t\t\tvar resy = Math.round(height/2);\n\n\t\t\tthis.renderTargetBright.setSize(resx, resy);\n\n\t\t\tfor( var i=0; i<this.nMips; i++) {\n\n\t\t\t\tthis.renderTargetsHorizontal[i].setSize(resx, resy);\n\t\t\t\tthis.renderTargetsVertical[i].setSize(resx, resy);\n\n\t\t\t\tthis.separableBlurMaterials[i].uniforms[ \"texSize\" ].value = new THREE.Vector2(resx, resy);\n\n\t\t\t\tresx = Math.round(resx/2);\n\t\t\t\tresy = Math.round(resy/2);\n\t\t\t}\n\t\t},\n\n\t    remove: function () {\n\t        this.system.unregister(this);\n\t        for( var i=0; i< this.renderTargetsHorizontal.length; i++) {\n\t\t\t\tthis.renderTargetsHorizontal[i].dispose();\n\t\t\t}\n\t\t\tfor( var i=0; i< this.renderTargetsVertical.length; i++) {\n\t\t\t\tthis.renderTargetsVertical[i].dispose();\n\t\t\t}\n\t\t\tthis.renderTargetBright.dispose();\n\t    },\n\n\t    getSeperableBlurMaterial: function(kernelRadius) {\n\n\t\t\treturn this.system.materialize( {\n\n\t\t\t\tdefines: {\n\t\t\t\t\t\"KERNEL_RADIUS\" : kernelRadius,\n\t\t\t\t\t\"SIGMA\" : kernelRadius\n\t\t\t\t},\n\n\t\t\t\tuniforms: {\n\t\t\t\t\t\"colorTexture\": { value: null },\n\t\t\t\t\t\"texSize\": \t\t\t\t{ value: new THREE.Vector2( 0.5, 0.5 ) },\n\t\t\t\t\t\"direction\": \t\t\t\t{ value: new THREE.Vector2( 0.5, 0.5 ) }\n\t\t\t\t},\n\n\t\t\t\tvertexShader:\n\t\t\t\t\t\"varying vec2 vUv;\\n\\\n\t\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\t\tvUv = uv;\\n\\\n\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\\n\t\t\t\t\t}\",\n\n\t\t\t\tfragmentShader:\n\t\t\t\t\t\"#include <common>\\\n\t\t\t\t\tvarying vec2 vUv;\\n\\\n\t\t\t\t\tuniform sampler2D colorTexture;\\n\\\n\t\t\t\t\tuniform vec2 texSize;\\\n\t\t\t\t\tuniform vec2 direction;\\\n\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\\\n\t\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\\\n\t\t\t\t\t}\\\n\t\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\t\tvec2 invSize = 1.0 / texSize;\\\n\t\t\t\t\t\tfloat fSigma = float(SIGMA);\\\n\t\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\\\n\t\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\\\n\t\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\\\n\t\t\t\t\t\t\tfloat x = float(i);\\\n\t\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\\\n\t\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\\\n\t\t\t\t\t\t\tvec3 sample1 = textureVR( colorTexture, vUv + uvOffset).rgb;\\\n\t\t\t\t\t\t\tvec3 sample2 = textureVR( colorTexture, vUv - uvOffset).rgb;\\\n\t\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\\\n\t\t\t\t\t\t\tweightSum += 2.0 * w;\\\n\t\t\t\t\t\t}\\\n\t\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\\n\\\n\t\t\t\t\t}\"\n\t\t\t} );\n\t\t},\n\n\t\tgetCompositeMaterial: function(nMips) {\n\n\t\t\treturn new THREE.ShaderMaterial( {\n\n\t\t\t\tdefines:{\n\t\t\t\t\t\"NUM_MIPS\" : nMips\n\t\t\t\t},\n\n\t\t\t\tuniforms: {\n\t\t\t\t\t\"blurTexture1\": { value: null },\n\t\t\t\t\t\"blurTexture2\": { value: null },\n\t\t\t\t\t\"blurTexture3\": { value: null },\n\t\t\t\t\t\"blurTexture4\": { value: null },\n\t\t\t\t\t\"blurTexture5\": { value: null },\n\t\t\t\t\t\"bloomStrength\" : { value: 1.0 },\n\t\t\t\t\t\"bloomFactors\" : { value: null },\n\t\t\t\t\t\"bloomTintColors\" : { value: null },\n\t\t\t\t\t\"bloomRadius\" : { value: 0.0 }\n\t\t\t\t},\n\n\t\t\t\tvertexShader:\n\t\t\t\t\t\"varying vec2 vUv;\\n\\\n\t\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\t\tvUv = uv;\\n\\\n\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\\n\t\t\t\t\t}\",\n\n\t\t\t\tfragmentShader:\n\t\t\t\t\t\"varying vec2 vUv;\\\n\t\t\t\t\tuniform sampler2D blurTexture1;\\\n\t\t\t\t\tuniform sampler2D blurTexture2;\\\n\t\t\t\t\tuniform sampler2D blurTexture3;\\\n\t\t\t\t\tuniform sampler2D blurTexture4;\\\n\t\t\t\t\tuniform sampler2D blurTexture5;\\\n\t\t\t\t\tuniform float bloomStrength;\\\n\t\t\t\t\tuniform float bloomRadius;\\\n\t\t\t\t\tuniform float bloomFactors[NUM_MIPS];\\\n\t\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\\\n\t\t\t\t\t\\\n\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \\\n\t\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\\\n\t\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\\\n\t\t\t\t\t}\\\n\t\t\t\t\t\\\n\t\t\t\t\tvoid main() {\\\n\t\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \\\n\t\t\t\t\t\t \t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \\\n\t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \\\n\t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \\\n\t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\\\n\t\t\t\t\t}\"\n\t\t\t} );\n\t\t},\n\n\t\tdiffuse: true,\n\t\tdefaults: [\"1.0\"],\n\t    fragment: [\n\t        \"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth){\",\n\t        \"   color.rgb += texture2D($texture, uv).rgb;\",\n\t        \"}\"\n\t    ].join(\"\\n\")\n\t});\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n\t/**\n\t * @author bhouston / http://clara.io/\n\t *\n\t * Luminosity\n\t * http://en.wikipedia.org/wiki/Luminosity\n\t */\n\n\tmodule.exports = {\n\n\t  shaderID: \"luminosityHighPass\",\n\n\t\tuniforms: {\n\n\t\t\t\"tDiffuse\": { type: \"t\", value: null },\n\t\t\t\"luminosityThreshold\": { type: \"f\", value: 1.0 },\n\t\t\t\"smoothWidth\": { type: \"f\", value: 1.0 },\n\t\t\t\"defaultColor\": { type: \"c\", value: new THREE.Color( 0x000000 ) },\n\t\t\t\"defaultOpacity\":  { type: \"f\", value: 0.0 }\n\n\t\t},\n\n\t\tvertexShader: [\n\n\t\t\t\"varying vec2 vUv;\",\n\n\t\t\t\"void main() {\",\n\n\t\t\t\t\"vUv = uv;\",\n\n\t\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform sampler2D tDiffuse;\",\n\t\t\t\"uniform vec3 defaultColor;\",\n\t\t\t\"uniform float defaultOpacity;\",\n\t\t\t\"uniform float luminosityThreshold;\",\n\t\t\t\"uniform float smoothWidth;\",\n\n\t\t\t\"varying vec2 vUv;\",\n\n\t\t\t\"void main() {\",\n\n\t\t\t\t\"vec4 texel = texture2D( tDiffuse, vUv );\",\n\n\t\t\t\t\"vec3 luma = vec3( 0.299, 0.587, 0.114 );\",\n\n\t\t\t\t\"float v = dot( texel.xyz, luma );\",\n\n\t\t\t\t\"vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\",\n\n\t\t\t\t\"float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\",\n\n\t\t\t\t\"gl_FragColor = mix( outputColor, texel, alpha );\",\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t};\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n\tAFRAME.registerComponent(\"colors\", {\n\t    multiple: true,\n\n\t    schema: {\n\t        \"mode\": { default: \"map\" },\n\t        \"lut\": { type: \"selector\"},\n\t        \"lutClamp\": { default: false },\n\t        \"lutFlip\": { default: false },\n\t        \"add\": { type: \"vec3\", default: new THREE.Vector3(0,0,0) },\n\t        \"mul\": { type: \"vec3\", default: new THREE.Vector3(1,1,1) },\n\t        \"pow\": { type: \"vec3\", default: new THREE.Vector3(1,1,1) },\n\t        \"left\": { type: \"vec3\", default: new THREE.Vector3(0,0,0) },\n\t        \"right\": { type: \"vec3\", default: new THREE.Vector3(1,1,1) },\n\t        \"min\": { type: \"vec3\", default: new THREE.Vector3(0,0,0) },\n\t        \"max\": { type: \"vec3\", default: new THREE.Vector3(1,1,1) },\n\t        \"quant\": { type: \"vec3\", default: new THREE.Vector3(0.2,0.2,0.2) },\n\t        \"orig\": { type: \"vec3\", default: new THREE.Vector3(1,1,1) },\n\t        \"red\": { type: \"vec3\", default: new THREE.Vector3(1,0,0) },\n\t        \"green\": { type: \"vec3\", default: new THREE.Vector3(0,0.5,0.5) },\n\t        \"blue\": { type: \"vec3\", default: new THREE.Vector3(0,0.5,0.5) },\n\t    },\n\n\t    init: function () {\n\t        this.system = this.el.sceneEl.systems.effects;\n\t        this.uniforms = {\n\t            \"add\": { type: \"v3\", value: null },\n\t            \"mul\": { type: \"v3\", value: null },\n\t            \"pow\": { type: \"v3\", value: null },\n\t            \"left\": { type: \"v3\", value: null },\n\t            \"right\": { type: \"v3\", value: null },\n\t            \"min\": { type: \"v3\", value: null },\n\t            \"max\": { type: \"v3\", value: null },\n\t            \"quant\": { type: \"v3\", value: null },\n\t            \"orig\": { type: \"v3\", value: null },\n\t            \"red\": { type: \"v3\", value: null },\n\t            \"green\": { type: \"v3\", value: null },\n\t            \"blue\": { type: \"v3\", value: null },\n\t            \"texture\": { \n\t                type: \"t\", \n\t                value: new THREE.Texture(\n\t                    undefined, // Default Image\n\t                    undefined, // Default Mapping\n\t                    undefined, // Default wrapS\n\t                    undefined, // Default wrapT\n\t                    THREE.NearestFilter, // magFilter\n\t                    THREE.NearestFilter  // minFilter\n\t                )}\n\t        }\n\t        \n\t        this.rebuild();\n\t    \n\t        this.system.register(this);\n\t    },\n\n\t    update: function (oldData) {\n\t        var d = this.data, us =  this.uniforms, needsRebuild = false;\n\t        \n\t        for(var u in us) {\n\t            if(d[u] !== undefined) us[u].value = d[u]; \n\t        }\n\t        []\n\t        if(this.data.lutFlip !== oldData.lutFlip || this.data.lutClamp !== oldData.lutClamp || this.data.mode != oldData.mode) {\n\t            this.rebuild();\n\t        }\n\n\t        if(this.data.lut !== oldData.lut) {\n\t            const texture = this.uniforms.texture.value;\n\t            texture.image = this.data.lut;\n\t            texture.needsUpdate = true;\n\t        }\n\t    },\n\n\t    remove: function () {\n\t        this.system.unregister(this);\n\t    },\n\n\t    rebuild: function () {\n\t        var arr = [], m = this.data.mode;\n\t        for(var i=0; i < m.length; i++){\n\t            var op = this.ops[m[i]];\n\t            if(op) arr.push(op);\n\t        }\n\t        \n\t        this.fragment = [\n\t            this.data.lutClamp ? \"\" : \"#define $LUT_NO_CLAMP 1\",\n\t            this.data.lutFlip ? \"#define $LUT_FLIP_Y 1\" : \"\",\n\t            this.preFragment, \n\t            arr.join(\"\\n\"), \n\t            \"}\"\n\t        ].join(\"\\n\");\n\n\t        this.system.needsUpdate = true;\n\t    },\n\n\t    ops: {\n\t        \"m\": \"color.rgb *= $mul;\",\n\t        \"a\": \"color.rgb += $add;\",\n\t        \"p\": \"color.rgb = pow(color.rgb, $pow);\",\n\t        \"h\": \"color.rgb = $rgb2hsv(color.rgb);\",\n\t        \"r\": \"color.rgb = $hsv2rgb(color.rgb);\",\n\t        \"s\": \"color.rgb = smoothstep($left, $right, color.rgb);\",\n\t        \"l\": \"color.rgb = $lut(color).rgb;\",\n\t        \"q\": \"color.rgb = floor(color.rgb / $quant) * $quant;\",\n\t        \"c\": \"color.rgb = clamp(color.rgb, $min, $max);\",\n\t        \"g\": \"color.rgb = vec3(dot(color.rgb, vec3(0.299, 0.587, 0.114)));\",\n\t        \"o\": \"color.rgb = mix(color.rgb, orig.rgb, $orig);\",\n\t        \"t\": \"color.rgb = vec3(dot(color.rgb, $red), dot(color.rgb, $green), dot(color.rgb, $blue));\",\n\t        \"b\": \"color.rgb = color.rgb;\"\n\t    },\n\n\t    diffuse: true,\n\n\t    preFragment: [\n\t        // Lut from https://github.com/mattdesl/glsl-lut\n\t        \"vec4 $lut(vec4 textureColor) {\",\n\t        \"    #ifndef $LUT_NO_CLAMP\",\n\t        \"        textureColor = clamp(textureColor, 0.0, 1.0);\",\n\t        \"    #endif\",\n\n\t        \"    mediump float blueColor = textureColor.b * 63.0;\",\n\n\t        \"    mediump vec2 quad1;\",\n\t        \"    quad1.y = floor(floor(blueColor) / 8.0);\",\n\t        \"    quad1.x = floor(blueColor) - (quad1.y * 8.0);\",\n\n\t        \"    mediump vec2 quad2;\",\n\t        \"    quad2.y = floor(ceil(blueColor) / 8.0);\",\n\t        \"    quad2.x = ceil(blueColor) - (quad2.y * 8.0);\",\n\n\t        \"    highp vec2 texPos1;\",\n\t        \"    texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.r);\",\n\t        \"    texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.g);\",\n\n\t        \"    #ifdef $LUT_FLIP_Y\",\n\t        \"        texPos1.y = 1.0-texPos1.y;\",\n\t        \"    #endif\",\n\n\t        \"    highp vec2 texPos2;\",\n\t        \"    texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.r);\",\n\t        \"    texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.g);\",\n\n\t        \"    #ifdef $LUT_FLIP_Y\",\n\t        \"        texPos2.y = 1.0-texPos2.y;\",\n\t        \"    #endif\",\n\n\t        \"    lowp vec4 newColor1 = texture2D($texture, texPos1);\",\n\t        \"    lowp vec4 newColor2 = texture2D($texture, texPos2);\",\n\n\t        \"    lowp vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\",\n\t        \"    return newColor;\",\n\t        \"}\",\n\n\t        \"vec3 $rgb2hsv(vec3 c){\",\n\t        \n\t        \"    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\",\n\t        \"    vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\",\n\t        \"    vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\",\n\n\t        \"    float d = q.x - min(q.w, q.y);\",\n\t        \"    float e = 1.0e-10;\",\n\t        \"    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\",\n\t        \"}\",\n\n\t        \"vec3 $hsv2rgb(vec3 c)\",\n\t        \"{\",\n\t        \"    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\",\n\t        \"    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\",\n\t        \"    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\",\n\t        \"}\",\n\n\t        \"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth){\",\n\t        \"vec3 orig = color.rgb;\",\n\t    ].join(\"\\n\")\n\t});\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\n\t// Ported from three's glitch pass/shader and added VR support\n\n\tAFRAME.registerComponent(\"glitch\", {\n\t    schema: { default: true },\n\n\t    init: function () {\n\t        this.system = this.el.sceneEl.systems.effects;\n\n\t        this.uniforms = {\n\t            \"tDisp\":\t\t{ type: \"t\", value: this.generateHeightmap( 64 ) },\n\t            \"amount\":\t\t{ type: \"f\", value: 0.08 },\n\t            \"angle\":\t\t{ type: \"f\", value: 0.02 },\n\t            \"seed\":\t\t\t{ type: \"f\", value: 0.02 },\n\t            \"seed_x\":\t\t{ type: \"f\", value: 0.02 },//-1,1\n\t            \"seed_y\":\t\t{ type: \"f\", value: 0.02 },//-1,1\n\t            \"distortion_x\":\t{ type: \"f\", value: 0.5 },\n\t            \"distortion_y\":\t{ type: \"f\", value: 0.6 },\n\t            \"col_s\":\t\t{ type: \"f\", value: 0.05 }\n\t\t    };\n\t        \n\t\t\tthis.exports = {\n\t\t\t\tglitch: {\n\t                fragment: this.fragment,\n\t                uniforms: this.uniforms\n\t            }\n\t\t\t}\n\t        // by declaring a .material property we set this component to take a whole pass of it's own\n\t        this.material = this.system.fuse([this.exports.glitch]);\n\n\t        this.system.register(this);\n\t    },\n\n\t    vr: true,\n\n\t    update: function () {\n\t        this.bypass = !this.data;\n\t        this.curF = 0;\n\t        this.generateTrigger();\n\t    },\n\n\t    remove: function () {\n\t        this.system.unregister(this);\n\t    },\n\n\t    tock: function () {\n\t        this.uniforms[ 'seed' ].value = Math.random();//default seeding\n\t\t\t\n\t\t\tif ( this.curF % this.randX == 0) {\n\n\t\t\t\tthis.uniforms[ 'amount' ].value = Math.random() / 30;\n\t\t\t\tthis.uniforms[ 'angle' ].value = THREE.Math.randFloat( - Math.PI, Math.PI );\n\t\t\t\tthis.uniforms[ 'seed_x' ].value = THREE.Math.randFloat( - 1, 1 );\n\t\t\t\tthis.uniforms[ 'seed_y' ].value = THREE.Math.randFloat( - 1, 1 );\n\t\t\t\tthis.uniforms[ 'distortion_x' ].value = THREE.Math.randFloat( 0, 1 );\n\t\t\t\tthis.uniforms[ 'distortion_y' ].value = THREE.Math.randFloat( 0, 1 );\n\t\t\t\tthis.curF = 0;\n\t\t\t\tthis.generateTrigger();\n\n\t\t\t} else if ( this.curF % this.randX < this.randX / 5 ) {\n\n\t\t\t\tthis.uniforms[ 'amount' ].value = Math.random() / 90;\n\t\t\t\tthis.uniforms[ 'angle' ].value = THREE.Math.randFloat( - Math.PI, Math.PI );\n\t\t\t\tthis.uniforms[ 'distortion_x' ].value = THREE.Math.randFloat( 0, 1 );\n\t\t\t\tthis.uniforms[ 'distortion_y' ].value = THREE.Math.randFloat( 0, 1 );\n\t\t\t\tthis.uniforms[ 'seed_x' ].value = THREE.Math.randFloat( - 0.3, 0.3 );\n\t\t\t\tthis.uniforms[ 'seed_y' ].value = THREE.Math.randFloat( - 0.3, 0.3 );\n\n\t\t\t} \n\n\t\t\tthis.curF ++;\n\t    },\n\n\t    generateTrigger: function() {\n\n\t\t\tthis.randX = THREE.Math.randInt( 120, 240 );\n\n\t\t},\n\n\t\tgenerateHeightmap: function( dt_size ) {\n\n\t\t\tvar data_arr = new Float32Array( dt_size * dt_size * 3 );\n\t\t\tvar length = dt_size * dt_size;\n\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\t\tvar val = THREE.Math.randFloat( 0, 1 );\n\t\t\t\tdata_arr[ i * 3 + 0 ] = val;\n\t\t\t\tdata_arr[ i * 3 + 1 ] = val;\n\t\t\t\tdata_arr[ i * 3 + 2 ] = val;\n\n\t\t\t}\n\n\t\t\tvar texture = new THREE.DataTexture( data_arr, dt_size, dt_size, THREE.RGBFormat, THREE.FloatType );\n\t\t\ttexture.needsUpdate = true;\n\t\t\treturn texture;\n\n\t\t},\n\n\t    fragment: [\n\t\t\t\"float $rand(vec2 co){\",\n\t\t\t\t\"return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\",\n\t\t\t\"}\",\n\t\t\t\t\t\n\t\t\t\"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth) {\",\n\t\t\t\t\t\"vec2 p = uv;\",\n\t                \"vec2 p2 = vec2( smoothstep(uvClamp.x, uvClamp.y, p.x),p.y);\",\n\t\t\t\t\t\"float xs = floor(gl_FragCoord.x / 0.5);\",\n\t\t\t\t\t\"float ys = floor(gl_FragCoord.y / 0.5);\",\n\t\t\t\t\t//based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch\n\t\t\t\t\t\"vec4 normal = texture2D ($tDisp, p2 * $seed * $seed);\",\n\t\t\t\t\t\"if(p2.y < $distortion_x + $col_s && p2.y > $distortion_x - $col_s * $seed) {\",\n\t\t\t\t\t\t\"if($seed_x>0.){\",\n\t\t\t\t\t\t\t\"p.y = 1. - (p.y + $distortion_y);\",\n\t\t\t\t\t\t\"}\",\n\t\t\t\t\t\t\"else {\",\n\t\t\t\t\t\t\t\"p.y = $distortion_y;\",\n\t\t\t\t\t\t\"}\",\n\t\t\t\t\t\"}\",\n\t\t\t\t\t\"if(p2.x < $distortion_y + $col_s && p2.x > $distortion_y - $col_s * $seed) {\",\n\t\t\t\t\t\t\"if( $seed_y > 0.){\",\n\t\t\t\t\t\t\t\"p.x = $distortion_x;\",\n\t\t\t\t\t\t\"}\",\n\t\t\t\t\t\t\"else {\",\n\t\t\t\t\t\t\t\"p.x = 1. - (p.x + $distortion_x);\",\n\t\t\t\t\t\t\"}\",\n\t\t\t\t\t\"}\",\n\t\t\t\t\t\"p.x+=normal.x* $seed_x * ($seed/5.);\",\n\t\t\t\t\t\"p.y+=normal.y* $seed_y * ($seed/5.);\",\n\t\t\t\t\t//base from RGB shift shader\n\t\t\t\t\t\"vec2 offset = $amount * vec2( cos($angle), sin($angle));\",\n\t\t\t\t\t\"vec4 cr = textureVR(tDiffuse, p + offset);\",\n\t\t\t\t\t\"vec4 cga = textureVR(tDiffuse, p);\",\n\t\t\t\t\t\"vec4 cb = textureVR(tDiffuse, p - offset);\",\n\t\t\t\t\t\"color = vec4(cr.r, cga.g, cb.b, cga.a);\",\n\t\t\t\t\t//add noise\n\t\t\t\t\t\"vec4 snow = 200.*$amount*vec4($rand(vec2(xs * $seed,ys * $seed*50.))*0.2);\",\n\t\t\t\t\t\"color = color+ snow;\",\n\t\t\t\"}\"\n\t\t].join( \"\\n\" )\n\t});\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\n\t// Ported from the shader in Three.js examples\n\t// with the addition of a separate input pass\n\n\tAFRAME.registerComponent(\"godrays\", {\n\t    schema: {\n\t        \"tint\": { type: \"color\", default: \"#FFFFFF\" },\n\t        \"threshold\": { type: \"vec4\", default: new THREE.Vector4(0,1,1) },\n\t        \"src\": { type: \"selector\", default: null },\n\t        \"intensity\": { default: 1 },\n\t        \"filter\": { type: \"array\", default: [] },\n\t        \"ratio\": { default: 0.25 }\n\t\t},\n\n\t    init: function () {\n\t        this.system = this.el.sceneEl.systems.effects;\n\t        var pars = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat };\n\t\t\tthis.rtFilter = new THREE.WebGLRenderTarget( 1, 1, pars );\n\t        this.rtTextureGodRays1 = new THREE.WebGLRenderTarget( 1, 1, pars );\n\t\t\tthis.rtTextureGodRays2 = new THREE.WebGLRenderTarget( 1, 1, pars );\n\t        \n\t        this.exports = {\n\t            filter: {\n\t                includes: [\"packing\"],\n\t                uniforms: {\n\t                    \"tint\": { type: \"c\", value: new THREE.Color() },\n\t                    \"threshold\": { type: \"v2\", value: new THREE.Vector2(0,1) },\n\t                },\n\t                depth: true, \n\t                fragment: [\n\t                    \"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth) {\",\n\t                    \"   float v = viewZToOrthographicDepth(perspectiveDepthToViewZ(depth, cameraNear, cameraFar), cameraNear, cameraFar);\",\n\t                    \"   color.rgb = vec3(smoothstep($threshold.x, $threshold.y, v)) * $tint;\",\n\t                    \"}\"\n\t                ].join( \"\\n\" ),\n\t            },\n\t            blur: {\n\t                uniforms: {\n\t                    step: { type:\"f\", value: 1.0 },\n\t                    src: { type: \"v3\", value: new THREE.Vector3( 0.5, 0.5, 0. ) }\n\t                },\n\t                fragment: [\n\t                    \"void $main(inout vec4 color, vec4 orig, vec2 uv, float depth) {\",\n\t                        \"vec2 center = vec2(mix(uvClamp.x, uvClamp.y, $src.x), $src.y);\",\n\t                        \"vec2 delta = center - uv;\",\n\t                        \"float dist = length( delta );\",\n\t                        \"vec2 stepv = $step * delta / dist;\",\n\t                        \"float iters = dist/$step;\",\n\t                        \"vec4 col = vec4(0.0);\",\n\t                        \"if ( 0.0 <= iters && uv.y < 1.0 ) col += textureVR( tDiffuse, uv );\",\n\t                        \"uv += stepv;\",\n\t                        \"if ( 1.0 <= iters && uv.y < 1.0 ) col += textureVR( tDiffuse, uv );\",\n\t                        \"uv += stepv;\",\n\t                        \"if ( 2.0 <= iters && uv.y < 1.0 ) col += textureVR( tDiffuse, uv );\",\n\t                        \"uv += stepv;\",\n\t                        \"if ( 3.0 <= iters && uv.y < 1.0 ) col += textureVR( tDiffuse, uv );\",\n\t                        \"uv += stepv;\",\n\t                        \"if ( 4.0 <= iters && uv.y < 1.0 ) col += textureVR( tDiffuse, uv );\",\n\t                        \"uv += stepv;\",\n\t                        \"if ( 5.0 <= iters && uv.y < 1.0 ) col += textureVR( tDiffuse, uv );\",\n\t                        \"color = col/6.0;\",\n\t                    \"}\"\n\n\t                ].join( \"\\n\" )\n\t            }\n\t        }\n\t        \n\t        this.materialGodraysGenerate = this.system.fuse([this.exports.blur]);\n\t        this.uniforms = {\n\t            \"intensity\": { type: \"f\", value: 1 },\n\t            \"attenuation\": {type: \"f\", value: 1 },\n\t            \"texture\": { type: \"t\", value: this.rtTextureGodRays2 }\n\t\t    };\n\n\t        this.materialFilter = null;\n\t        \n\t        this.needsResize = true;\n\t        this.system.register(this);\n\t    },\n\n\t    setSize: function (w,h) {\n\t       w = Math.round(w * this.data.ratio);\n\t       h = Math.round(h * this.data.ratio);\n\t       this.rtTextureGodRays1.setSize(w,h);\n\t       this.rtTextureGodRays2.setSize(w,h);\n\t       this.rtFilter.setSize(w,h);\n\t    },\n\n\t    update: function (oldData) {\n\t        this.exports.filter.uniforms.tint.value.set(this.data.tint);\n\t        this.uniforms.intensity.value = this.data.intensity;\n\t        if(this.data.filter !== oldData.filter) {\n\t            if(this.materialFilter) this.materialFilter.dispose();\n\t            this.materialFilter = this.system.fuse(this.data.filter.length ? this.data.filter : [this.exports.filter]);\n\t        }\n\t        this.bypass = this.data.src === null;\n\t    },\n\n\t    tock: function () {\n\t        if (!this.system.isActive(this, true)) return;\n\t        var self = this;\n\t        \n\t        this.system.tDiffuse.value = this.system.renderTarget.texture;\n\t        this.system.renderPass(this.materialFilter, this.rtFilter, fn )\n\n\t        var fn = function (material, camera, eye) {\n\t            var cp3 = new THREE.Vector3(), cd3 = new THREE.Vector3();\n\t            var v3 = self.exports.blur.uniforms[ \"src\" ].value;\n\t            self.data.src.object3D.getWorldPosition(v3);\n\t            camera.getWorldPosition(cp3);\n\t            camera.getWorldDirection(cd3);\n\t            cp3.sub(v3);\n\t            cp3.normalize();\n\t            cd3.normalize();\n\t            self.uniforms.attenuation.value = Math.pow(Math.max(0, -cd3.dot(cp3)), 1.33);\n\t            \n\t            v3.project( camera );\n\t            v3.set((v3.x + 1 ) / 2, (v3.y + 1 ) / 2, 0);\n\t            \n\t        };\n\n\t        var filterLen = 1.0;\n\t\t\tvar TAPS_PER_PASS = 6.0;\n\t        \n\t        var pass = 1.0;\n\t        var stepLen = filterLen * Math.pow( TAPS_PER_PASS, -pass );\n\t        this.exports.blur.uniforms[ \"step\" ].value = stepLen;\n\t        this.system[ \"tDiffuse\" ].value = this.rtFilter.texture;\n\t        this.system.renderPass(this.materialGodraysGenerate, this.rtTextureGodRays2, fn )\n\t        \n\t        pass = 2.0;\n\t        stepLen = filterLen * Math.pow( TAPS_PER_PASS, -pass );\n\t        this.exports.blur.uniforms[ \"step\" ].value = stepLen;\n\t        this.system[ \"tDiffuse\" ].value = this.rtTextureGodRays2.texture;\n\t        this.system.renderPass(this.materialGodraysGenerate, this.rtTextureGodRays1, fn );\n\t        \n\t        pass = 3.0;\n\t        stepLen = filterLen * Math.pow( TAPS_PER_PASS, -pass );\n\t        this.exports.blur.uniforms[ \"step\" ].value = stepLen;\n\t        this.system[ \"tDiffuse\" ].value = this.rtTextureGodRays1.texture;\n\t        this.system.renderPass(this.materialGodraysGenerate, this.rtTextureGodRays2, fn )\n\t    },\n\n\t    remove: function () {\n\t        this.rtTextureGodRays1.dispose();\n\t        this.rtTextureGodRays2.dispose();\n\t        this.rtFilter.dispose();\n\n\t        this.materialGodraysGenerate.dispose();\n\t        this.materialFilter.dispose();\n\t        this.system.unregister(this);\n\t    },\n\n\t    diffuse: true,\n\n\t    fragment: [\n\t        \"float $blendScreen(float base, float blend) {\",\n\t        \"    return 1.0-((1.0-base)*(1.0-blend));\",\n\t        \"}\",\n\n\t        \"vec3 $blendScreen(vec3 base, vec3 blend) {\",\n\t        \"    return vec3($blendScreen(base.r,blend.r),$blendScreen(base.g,blend.g),$blendScreen(base.b,blend.b));\",\n\t        \"}\",\n\n\t        \"vec3 $blendScreen(vec3 base, vec3 blend, float opacity) {\",\n\t\t    \"    return ($blendScreen(base, blend) * opacity + base * (1.0 - opacity));\",\n\t        \"}\",\n\n\t\t\t\"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth) {\",\n\t\t\t\"   vec4 texel = texture2D($texture, uv);\",\n\t        \"   color.rgb = $blendScreen( color.rgb, texel.rgb, $intensity * $attenuation);\",\n\t        \"}\"\n\t\t].join( \"\\n\" )\n\t});\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar SAOShader = __webpack_require__(14);\n\tvar DepthLimitedBlurShader = __webpack_require__(15);\n\n\tAFRAME.registerComponent(\"ssao\", {\n\t    schema: {\n\t        \"samples\": { type: \"number\", default: 16},\n\t        \"rings\": { type: \"number\", default: 7 },\n\t        \"radius\": { type: \"number\", default: 0.5 },\n\t        \"ratio\": { default: 0.5 },\n\t        \"intensity\": { default: 1.0 },\n\t        \"maxDepth\": { default: 0.99 },\n\t        \"bias\": { default: 0.05 },\n\t        \"scale\": { default: 0.15 },\n\t        \"blurRadius\": { default: 7 },\n\t        \"depthCutoff\":  { default: 10 }\n\t\t},\n\n\t    init: function () {\n\t        this.system = this.el.sceneEl.systems.effects;\n\t        var pars = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat };\n\t        this.renderTargets = [];\n\t\t\tthis.renderTargets.push(new THREE.WebGLRenderTarget( 1, 1, pars));\n\t\t\tthis.renderTargets.push(new THREE.WebGLRenderTarget( 1, 1, pars));\t\n\t        this.uniforms = {\n\t            \"texture\": { type: \"t\", value: this.renderTargets[0].texture },\n\t            \"intensity\": { type: \"f\", value: 1.0 },\n\t            \"maxDepth\": { type: \"f\", value: 0.99 },\n\t            \"depthCutoff\": { type: \"f\", default: 1}\n\t\t    };\n\t        this.SAOMaterial = null;\n\t        this.hBlurMaterial = null;\n\t        this.vBlurMaterial = null;\n\t        this.sizeUniform = { type: \"v2\", value: new THREE.Vector2()};\n\t        this.system.register(this);\n\t    },\n\n\t    update: function (od) {\n\t        var d = this.data, self=this;\n\n\t        this.rebuild(d.rings !== od.rings || d.samples !== od.samples, d.blurRadius !== od.blurRadius);\n\t        this.uniforms.depthCutoff.value = d.depthCutoff;\n\t        this.uniforms.intensity.value = d.intensity;\n\t        this.uniforms.maxDepth.value = d.maxDepth;\n\t        this.SAOMaterial.uniforms.bias.value = d.bias;\n\t        this.SAOMaterial.uniforms.scale.value = d.scale;\n\t        this.SAOMaterial.uniforms.kernelRadius.value = d.radius;\n\t        this.hBlurMaterial.uniforms.depthCutoff.value = d.depthCutoff;\n\t        this.vBlurMaterial.uniforms.depthCutoff.value = d.depthCutoff;\n\t    },\n\n\t    rebuild: function (sao, blur) {\n\t        var d = this.data;\n\t        if(sao) {\n\t            if (this.SAOMaterial) {\n\t                this.SAOMaterial.dispose();\n\t            }\n\t            this.SAOMaterial = this.system.materialize(SAOShader(true));\n\t\t\t\tthis.SAOMaterial.defines[\"RINGS\"] = parseInt(d.rings) + \".\";\n\t\t\t\tthis.SAOMaterial.defines[\"SAMPLES\"] = parseInt(d.samples) + \".\";\n\t\t\t\tthis.SAOMaterial.uniforms.cameraFar = this.system.cameraFar;\n\t            this.SAOMaterial.uniforms.cameraNear = this.system.cameraNear;\n\t        }\n\t        if(blur) {\n\t            if (this.hBlurMaterial) {\n\t                this.hBlurMaterial.dispose();\n\t                this.vBlurMaterial.dispose();\n\t            }\n\t            this.hBlurMaterial = this.system.materialize(DepthLimitedBlurShader(d.blurRadius, d.blurRadius/2, new THREE.Vector2(1,0)));\n\t            this.vBlurMaterial = this.system.materialize(DepthLimitedBlurShader(d.blurRadius, d.blurRadius/2, new THREE.Vector2(0,1)));\n\t            this.hBlurMaterial.uniforms.size = this.sizeUniform;\n\t            this.vBlurMaterial.uniforms.size = this.sizeUniform;\n\t            this.hBlurMaterial.uniforms.cameraFar = this.system.cameraFar;\n\t            this.hBlurMaterial.uniforms.cameraNear = this.system.cameraNear;\n\t            this.vBlurMaterial.uniforms.cameraFar = this.system.cameraFar;\n\t            this.vBlurMaterial.uniforms.cameraNear = this.system.cameraNear;\n\t        }\n\t    },\n\n\t    setSize: function(w, h) {\n\t        w = Math.ceil(w * this.data.ratio);\n\t        h = Math.ceil(h * this.data.ratio);\n\t        \n\t        this.sizeUniform.value.set(w,h);\n\n\t        this.renderTargets.forEach(function (rt) {\n\t            rt.setSize(w,h);\n\t        });\n\t    },\n\n\t    tock: function (time) {\n\t        if (!this.system.isActive(this, true)) return;\n\t        //this.SAOMaterial.uniforms.randomSeed.value = Math.random();\n\t        this.SAOMaterial.uniforms[ 'cameraInverseProjectionMatrix' ].value.getInverse( this.el.sceneEl.camera.projectionMatrix );\n\t\t\tthis.SAOMaterial.uniforms[ 'cameraProjectionMatrix' ].value = this.el.sceneEl.camera.projectionMatrix;\n\t    \n\t        this.SAOMaterial.uniforms.tDepth.value = this.el.sceneEl.renderTarget.depthTexture;\n\t        this.system.renderPass(this.SAOMaterial, this.renderTargets[0], true);\n\n\t\t\tif(this.data.blurRadius) {\n\t\t\t\tthis.hBlurMaterial.uniforms.tDiffuse.value = this.renderTargets[0].texture;\n\t\t\t\tthis.system.renderPass(this.hBlurMaterial, this.renderTargets[1], true);\n\n\t\t\t\tthis.vBlurMaterial.uniforms.tDiffuse.value = this.renderTargets[1].texture;\n\t\t\t\tthis.system.renderPass(this.vBlurMaterial, this.renderTargets[0], true);\n\t\t\t}\n\t\t},\n\n\t    remove: function () {\n\t        this.SAOMaterial.dispose();\n\t        this.hBlurMaterial.dispose();\n\t        this.vBlurMaterial.dispose();\n\t        this.renderTargets[0].dispose();\n\t        this.renderTargets[1].dispose();\n\t        this.system.unregister(this);\n\t    },\n\n\t    includes: [\"packing\"],\n\n\t    depth: true,\n\n\t    diffuse: true,\n\t    \n\t    fragment: [\n\t        \"float $unpackDepth(vec3 pack) {\",\n\t        \"\tfloat depth = dot( pack, 1.0 / vec3(1.0, 256.0, 256.0*256.0) );\",\n\t        \"\treturn depth * (256.0*256.0*256.0) / (256.0*256.0*256.0 - 1.0);\",\n\t        \"}\",\n\t\t\t\"void $main(inout vec4 color, vec4 origColor, vec2 uv, float depth) {\",\n\t\t\t\"   vec4 texel = texture2D($texture, uv);\",\n\t        \"   float z = perspectiveDepthToViewZ( $unpackDepth(texel.xyz), cameraNear, cameraFar );\",\n\t        \"   float Z = perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\",\n\t        \"   color.rgb *= abs(z-Z) > $depthCutoff || Z >= $maxDepth * cameraFar ? 1.0  :  1.0 - texel.a * $intensity;\",\n\t        \"}\"\n\t\t].join( \"\\n\" )\n\t});\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\n\t/**\n\t * @author bhouston / http://clara.io/\n\t *\n\t * Scalable Ambient Occlusion\n\t *\n\t */\n\n\tmodule.exports = function (isFirst) {\n\t\treturn {\n\t\t\tdefines: {},\n\n\t\t\tuniforms: {\n\n\t\t\t\t\"tDepth\":       { type: \"t\", value: null },\n\t\t\t\t\n\t\t\t\t\"cameraNear\":   { type: \"f\", value: 1 },\n\t\t\t\t\"cameraFar\":    { type: \"f\", value: 100 },\n\t\t\t\t\"cameraProjectionMatrix\": { type: \"m4\", value: new THREE.Matrix4() },\n\t\t\t\t\"cameraInverseProjectionMatrix\": { type: \"m4\", value: new THREE.Matrix4() },\n\n\t\t\t\t\"scale\":        { type: \"f\", value: 1.0 },\n\t\t\t\t\"bias\":         { type: \"f\", value: 0.5 },\n\n\t\t\t\t\"minResolution\": { type: \"f\", value: 0.0 },\n\t\t\t\t\"kernelRadius\": { type: \"f\", value: 0.5 },\n\t\t\t\t\"randomSeed\":   { type: \"f\", value: 0.0 },\n\t\t\t\t\"maxDepth\":   { type: \"f\", value: 1.0 }\n\t\t\t},\n\n\t\t\tvertexShader: [\n\n\t\t\t\t\"varying vec2 vUv;\",\n\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\"vUv = uv;\",\n\n\t\t\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\t\t\"}\"\n\n\t\t\t].join( \"\\n\" ),\n\n\t\t\tfragmentShader: [\n\n\t\t\t\t// total number of samples at each fragment\",\n\t\t\t\t\n\t\t\t\t\"#include <common>\",\n\t\t\t\t\"#include <packing>\",\n\n\t\t\t\t\"varying vec2 vUv;\",\n\n\t\t\t\t\"uniform sampler2D tDepth;\",\n\n\t\t\t\t\"uniform float cameraNear;\",\n\t\t\t\t\"uniform float cameraFar;\",\n\t\t\t\t\"uniform mat4 cameraProjectionMatrix;\",\n\t\t\t\t\"uniform mat4 cameraInverseProjectionMatrix;\",\n\n\t\t\t\t\"uniform float scale;\",\n\t\t\t\t\"uniform float intensity;\",\n\t\t\t\t\"uniform float bias;\",\n\t\t\t\t\"uniform float kernelRadius;\",\n\t\t\t\t\"uniform float minResolution;\",\n\t\t\t\t\"uniform float randomSeed;\",\n\t\t\t\t\"uniform float maxDepth;\",\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\"float unpackDepth(vec3 pack) {\",\n\t\t\t\t\"\tfloat depth = dot( pack, 1.0 / vec3(1.0, 256.0, 256.0*256.0) );\",\n\t  \t\t\t\"\treturn depth * (256.0*256.0*256.0) / (256.0*256.0*256.0 - 1.0);\",\n\t\t\t\t\"}\",\n\t\t\t\t\n\t\t\t\t\"vec3 packDepth(float depth) {\",\n\t\t\t\t\"\tfloat depthVal = depth * (256.0*256.0*256.0 - 1.0) / (256.0*256.0*256.0);\",\n\t   \t\t\t\"\tvec4 encode = fract( depthVal * vec4(1.0, 256.0, 256.0*256.0, 256.0*256.0*256.0) );\",\n\t    \t\t\"\treturn encode.xyz - encode.yzw / 256.0 + 1.0/512.0;\",\n\t\t\t\t\"}\",\n\n\t\t\t\t\n\t\t\t\t\"float getViewZ( const in float depth ) {\",\n\n\t\t\t\t\t\"return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\",\n\n\t\t\t\t\"}\",\n\n\t\t\t\t\"vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\",\n\n\t\t\t\t\t\"float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\",\n\t\t\t\t\t\"vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\",\n\t\t\t\t\t\"clipPosition *= clipW;\", // unprojection.\n\t\t\t\t\t\"return ( cameraInverseProjectionMatrix * clipPosition ).xyz;\",\n\n\t\t\t\t\"}\",\n\n\t\t\t\t\"vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {\",\n\n\t\t\t\t\t\"return normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );\",\n\t\t\t\t\n\t\t\t\t\"}\",\n\n\t\t\t\t\"float scaleDividedByCameraFar;\",\n\t\t\t\t\"float minResolutionMultipliedByCameraFar;\",\n\n\t\t\t\t\"float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {\",\n\n\t\t\t\t\t\"vec3 viewDelta = sampleViewPosition - centerViewPosition;\",\n\t\t\t\t\t\"float viewDistance = length( viewDelta );\",\n\t\t\t\t\t\"float scaledScreenDistance = scaleDividedByCameraFar * viewDistance;\",\n\t\t\t\t\t\"return max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );\",\n\n\t\t\t\t\"}\",\n\n\t\t\t\t// moving costly divides into consts\n\t\t\t\t\"const float ANGLE_STEP = PI2 * RINGS / SAMPLES;\",\n\t\t\t\t\"const float INV_NUM_SAMPLES = 1.0 / SAMPLES;\",\n\n\t\t\t\t\"float getAmbientOcclusion( const in vec3 centerViewPosition) {\",\n\n\t\t\t\t\t// precompute some variables require in getOcclusion.\n\t\t\t\t\t\"scaleDividedByCameraFar = scale;\",\n\t\t\t\t\t\"minResolutionMultipliedByCameraFar = minResolution * cameraFar;\",\n\t\t\t\t\t\"vec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );\",\n\n\t\t\t\t\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\n\t\t\t\t\t\"float angle = rand( vUv + randomSeed ) * PI2;\",\n\t\t\t\t\t\"vec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES );\",\n\t\t\t\t\t\"vec2 radiusStep = radius;\",\n\t\t\t\t\t\"float occlusionSum = 0.;\",\n\t\t\t\t\t\"float weightSum = 0.;\",\n\t\t\t\t\t\"for( int i = 0; i < int(SAMPLES); i ++ ) {\",\n\t\t\t\t\t\t\"vec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;\",\n\t\t\t\t\t\t\"radius += radiusStep;\",\n\t\t\t\t\t\t\"angle += ANGLE_STEP;\",\n\n\t\t\t\t\t\t\"float sampleDepth = textureVR( tDepth, sampleUv ).x;\",\n\t\t\t\t\t\t\"if( sampleDepth >= ( 1.0 - EPSILON ) ) {\",\n\t\t\t\t\t\t\t\"continue;\",\n\t\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\t\"float sampleViewZ = getViewZ( sampleDepth );\",\n\t\t\t\t\t\t\"vec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );\",\n\t\t\t\t\t\t\"occlusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );\",\n\t\t\t\t\t\t\"weightSum += 1.0;\",\n\n\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\"if( weightSum == 0.0 ) discard;\",\n\t\t\t\t\t\"return occlusionSum / weightSum;\",\n\t\t\t\t\t\n\t\t\t\t\"}\",\n\n\n\t\t\t\t\"void main() {\",\n\t\t\t\t\t\"vec4 texel = texture2D( tDepth, vUv );\",\n\t\t\t\t\t\"float centerDepth = texel.x;\",\n\t\t\t\t\t\n\t\t\t\t\t\"if( centerDepth >= ( maxDepth - EPSILON ) ) {\",\n\t\t\t\t\t\t\"discard;\",\n\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\"float centerViewZ = getViewZ( centerDepth );\",\n\t\t\t\t\t\"vec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );\",\n\n\t\t\t\t\t\"gl_FragColor =  vec4(packDepth(texel.x), getAmbientOcclusion( viewPosition));\",\n\t\t\t\t\"}\"\n\n\t\t\t].join( \"\\n\" )\n\n\t\t};\n\t}\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\n\t/**\n\t * @author bhouston / http://clara.io\n\t *\n\t * For a horizontal blur, use X_STEP 1, Y_STEP 0\n\t * For a vertical blur, use X_STEP 0, Y_STEP 1\n\t *\n\t *\n\t */\n\n\t// Adapted by wizgrav to pack depth and AO in a single rgba texture\n\n\tTHREE.BlurShaderUtils = {\n\n\t\tcreateSampleWeights: function( kernelRadius, stdDev ) {\n\n\t\t\tvar gaussian = function( x, stdDev ) {\n\t\t\t\treturn Math.exp( - ( x*x ) / ( 2.0 * ( stdDev * stdDev ) ) ) / ( Math.sqrt( 2.0 * Math.PI ) * stdDev );\n\t\t\t};\n\n\t\t\tvar weights = [];\n\n\t\t\tfor( var i = 0; i <= kernelRadius; i ++ ) {\n\t\t\t\tweights.push( gaussian( i, stdDev ) );\n\t\t\t}\n\n\t\t\treturn weights;\n\t\t},\n\n\t\tcreateSampleOffsets: function( kernelRadius, uvIncrement ) {\n\n\t\t\tvar offsets = [];\n\n\t\t\tfor( var i = 0; i <= kernelRadius; i ++ ) {\n\t\t\t\toffsets.push( uvIncrement.clone().multiplyScalar( i ) );\n\t\t\t}\n\n\t\t\treturn offsets;\n\n\t\t},\n\n\t\tconfigure: function( kernelRadius, stdDev, uvIncrement ) {\n\t\t\treturn {\n\t\t\t\t'sampleUvOffsets': THREE.BlurShaderUtils.createSampleOffsets( kernelRadius, uvIncrement ),\n\t\t\t\t'sampleWeights': THREE.BlurShaderUtils.createSampleWeights( kernelRadius, stdDev )\n\t\t\t}\n\t\t}\n\n\t};\n\n\n\tmodule.exports =  function (radius, stdDev, uvIncrement) {\n\t\tradius = radius || 4;\n\t\tvar config = THREE.BlurShaderUtils.configure(radius, stdDev, uvIncrement )\n\t\treturn {\n\t\t\tdefines: {\n\n\t\t\t\t\"KERNEL_RADIUS\": radius,\n\n\t\t\t},\n\n\t\t\tuniforms: {\n\n\t\t\t\t\"tDiffuse\":         { type: \"t\", value: null },\n\t\t\t\t\"size\":             { type: \"v2\", value: new THREE.Vector2( 512, 512 ) },\n\t\t\t\t\"sampleUvOffsets\":  { type: \"v2v\", value: config.sampleUvOffsets },\n\t\t\t\t\"sampleWeights\":    { type: \"1fv\", value: config.sampleWeights },\n\t\t\t\t\"depthCutoff\":      { type: \"f\", value: 10 },\n\t\t\t\t\"cameraFar\":      { type: \"f\", value: 1 },\n\t\t\t\t\"cameraNear\":      { type: \"f\", value: 1000 }\n\t\t\t},\n\n\t\t\tvertexShader: [\n\n\t\t\t\t\"#include <common>\",\n\n\t\t\t\t\"uniform vec2 size;\",\n\n\t\t\t\t\"varying vec2 vUv;\",\n\t\t\t\t\"varying vec2 vInvSize;\",\n\n\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\"vUv = uv;\",\n\t\t\t\t\t\"vInvSize = 1.0 / size;\",\n\n\t\t\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\t\t\"}\"\n\n\t\t\t].join( \"\\n\" ),\n\n\t\t\tfragmentShader: [\n\n\t\t\t\t\"#include <common>\",\n\t\t\t\t\"#include <packing>\",\n\n\t\t\t\t\"uniform sampler2D tDiffuse;\",\n\t\t\t\t\n\t\t\t\t\"uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];\",\n\t\t\t\t\"uniform float sampleWeights[ KERNEL_RADIUS + 1 ];\",\n\t\t\t\t\"uniform float depthCutoff;\",\n\t\t\t\t\"uniform float cameraFar;\",\n\t\t\t\t\"uniform float cameraNear;\",\n\n\t\t\t\t\"varying vec2 vUv;\",\n\t\t\t\t\"varying vec2 vInvSize;\",\n\t\t\t\t\n\t\t\t\t\"float unpackDepth(vec3 pack) {\",\n\t\t\t\t\"\tfloat depth = dot( pack, 1.0 / vec3(1.0, 256.0, 256.0*256.0) );\",\n\t  \t\t\t\"\treturn depth * (256.0*256.0*256.0) / (256.0*256.0*256.0 - 1.0);\",\n\t\t\t\t\"}\",\n\t\t\t\t\n\t\t\t\t\"float getViewZ( const in float depth ) {\",\n\n\t\t\t\t \"return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\",\n\n\t\t\t \t\"}\",\n\t\t\t\t\"void main() {\",\n\t\t\t\t\t\"vec4 texel = texture2D( tDiffuse, vUv );\",\n\t\t\t\t\t\"vec3 orig = texel.xyz;\",\n\t\t\t\t\t\"float depth = unpackDepth( orig );\",\n\t\t\t\t\t\"if( depth >= ( 1.0 - EPSILON ) ) {\",\n\t\t\t\t\t\t\"discard;\",\n\t\t\t\t\t\"}\",\n\t\t\t\t\t\"float centerViewZ = -getViewZ( depth );\",\n\t\t\t\t\t\"bool rBreak = false, lBreak = false;\",\n\n\t\t\t\t\t\"float weightSum = sampleWeights[0];\",\n\t\t\t\t\t\"float AOSum = texel.a * weightSum;\",\n\n\t\t\t\t\t\"for( int i = 1; i <= KERNEL_RADIUS; i ++ ) {\",\n\n\t\t\t\t\t\t\"float sampleWeight = sampleWeights[i];\",\n\t\t\t\t\t\t\"vec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;\",\n\n\t\t\t\t\t\t\"vec2 sampleUv = vUv + sampleUvOffset;\",\n\t\t\t\t\t\t\"texel = textureVR( tDiffuse, sampleUv );\",\n\t\t\t\t\t\t\"float viewZ = -getViewZ(unpackDepth( texel.xyz ));\",\n\n\t\t\t\t\t\t\"if( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;\",\n\n\t\t\t\t\t\t\"if( ! rBreak ) {\",\n\t\t\t\t\t\t\t\"AOSum += texel.a * sampleWeight;\",\n\t\t\t\t\t\t\t\"weightSum += sampleWeight;\",\n\t\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\t\"sampleUv = vUv - sampleUvOffset;\",\n\t\t\t\t\t\t\"texel = textureVR( tDiffuse, sampleUv );\",\n\t\t\t\t\t\t\"viewZ = -getViewZ(unpackDepth( texel.xyz ));\",\n\n\t\t\t\t\t\t\"if( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;\",\n\n\t\t\t\t\t\t\"if( ! lBreak ) {\",\n\t\t\t\t\t\t\t\"AOSum += texel.a * sampleWeight;\",\n\t\t\t\t\t\t\t\"weightSum += sampleWeight;\",\n\t\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\"gl_FragColor = vec4(orig, AOSum / weightSum);\",\n\n\t\t\t\t\"}\"\n\n\t\t\t].join( \"\\n\" )\n\n\t};\n\t}\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\n\tAFRAME.registerComponent(\"lighty\", {\n\t\tschema: {\n\t\t\tcolor: { type: \"color\", default: \"#000000\" },\n\t\t\tradius: { type: \"number\", default: 0 },\n\t\t\tdecay: { type: \"number\", default: 1 }\n\t\t},\n\t\t\n\t\tinit: function () {\n\t\t\tthis.el.sceneEl.systems.effects.addLight(this);\n\t\t},\n\t\t\n\t\tremove: function () {\n\t\t\tthis.el.sceneEl.systems.effects.removeLight(this);\n\t\t}\n\t});\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports) {\n\n\tTHREE.ShaderChunk[ 'lights_pars_maps' ] += [\n\t\t'#if defined TILED_FORWARD',\n\t\t'uniform vec4 tileData;',\n\t\t'uniform sampler2D tileTexture;',\n\t\t'uniform sampler2D lightTexture;',\n\t\t'#endif'\n\t].join( '\\n' );\n\n\tTHREE.ShaderChunk[ 'lights_fragment_maps' ] += [\n\t\t'',\n\t\t'#if defined TILED_FORWARD',\n\t\t'vec2 tUv = floor(gl_FragCoord.xy / tileData.xy * 32.) / 32. + tileData.zw;',\n\t\t'vec4 tile = texture2D(tileTexture, tUv);',\n\t\t'for (int i=0; i < 4; i++) {',\n\t\t'\tfloat tileVal = tile.x * 255.;',\n\t\t'  \ttile.xyzw = tile.yzwx;',\n\t\t'\tif(tileVal == 0.){ continue; }',\n\t\t'  \tfloat tileDiv = 128.;',\n\t\t'\tfor (int j=0; j < 8; j++) {',\n\t\t'  \t\tif (tileVal < tileDiv) {  tileDiv *= 0.5; continue; }',\n\t\t'\t\ttileVal -= tileDiv;',\n\t\t'\t\ttileDiv *= 0.5;',\n\t\t'  \t\tPointLight pointlight;',\n\t\t'\t\tfloat uvx = (float(8 * i + j) + 0.5) / 32.;',\n\t\t'  \t\tvec4 lightData = texture2D(lightTexture, vec2(uvx, 0.));',\n\t\t'  \t\tvec4 lightColor = texture2D(lightTexture, vec2(uvx, 1.));',\n\t\t'  \t\tpointlight.position = lightData.xyz;',\n\t\t'  \t\tpointlight.distance = lightData.w;',\n\t\t'  \t\tpointlight.color = lightColor.rgb;',\n\t\t'  \t\tpointlight.decay = lightColor.a;',\n\t\t'  \t\tgetPointDirectLightIrradiance( pointlight, geometry, directLight );',\n\t\t'\t\tRE_Direct( directLight, geometry, material, reflectedLight );',\n\t\t'\t}',\n\t\t'}',\n\t\t'#endif'\n\t].join( '\\n' );\n\n\tvar utils = AFRAME.utils;\n\n\tvar CubeLoader = new THREE.CubeTextureLoader();\n\tvar texturePromises = {};\n\n\t/**\n\t * Standard (physically-based) shader with tiled forward lighting.\n\t */\n\tAFRAME.registerShader('standard-fx', {\n\t  schema: {\n\t    ambientOcclusionMap: {type: 'map'},\n\t    ambientOcclusionMapIntensity: {default: 1},\n\t    ambientOcclusionTextureOffset: {type: 'vec2'},\n\t    ambientOcclusionTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n\t    color: {type: 'color'},\n\n\t    displacementMap: {type: 'map'},\n\t    displacementScale: {default: 1},\n\t    displacementBias: {default: 0.5},\n\t    displacementTextureOffset: {type: 'vec2'},\n\t    displacementTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\t    emissive: {type: 'color', default: '#000'},\n\t    emissiveIntensity: {default: 1},\n\t    envMap: {default: ''},\n\n\t    fog: {default: true},\n\t    height: {default: 256},\n\n\t    metalness: {default: 0.0, min: 0.0, max: 1.0},\n\t    metalnessMap: {type: 'map'},\n\t    metalnessTextureOffset: {type: 'vec2'},\n\t    metalnessTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n\t    normalMap: {type: 'map'},\n\t    normalScale: {type: 'vec2', default: {x: 1, y: 1}},\n\t    normalTextureOffset: {type: 'vec2'},\n\t    normalTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n\t    offset: {type: 'vec2', default: {x: 0, y: 0}},\n\t    repeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n\t    roughness: {default: 0.5, min: 0.0, max: 1.0},\n\t    roughnessMap: {type: 'map'},\n\t    roughnessTextureOffset: {type: 'vec2'},\n\t    roughnessTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n\t    sphericalEnvMap: {type: 'map'},\n\t    src: {type: 'map'},\n\t    width: {default: 512},\n\t    wireframe: {default: false},\n\t    wireframeLinewidth: {default: 2}\n\t  },\n\n\t  /**\n\t   * Initializes the shader.\n\t   * Adds a reference from the scene to this entity as the camera.\n\t   */\n\t  init: function (data) {\n\t    this.material = new THREE.MeshStandardMaterial(getMaterialData(data));\n\t    utils.material.updateMap(this, data);\n\t    if (data.normalMap) { utils.material.updateDistortionMap('normal', this, data); }\n\t    if (data.displacementMap) { utils.material.updateDistortionMap('displacement', this, data); }\n\t    if (data.ambientOcclusionMap) { utils.material.updateDistortionMap('ambientOcclusion', this, data); }\n\t    if (data.metalnessMap) { utils.material.updateDistortionMap('metalness', this, data); }\n\t    if (data.roughnessMap) { utils.material.updateDistortionMap('roughness', this, data); }\n\t    this.updateEnvMap(data);\n\t\tthis.material.onBeforeCompile = function ( shader ) {\n\t\t\tshader.uniforms.tileData = State.tileData;\n\t\t\tshader.uniforms.tileTexture = State.tileTexture;\n\t\t\tshader.uniforms.lightTexture = State.lightTexture;\n\t\t\tshader.defines[ 'TILED_FORWARD' ] = 1;  \n\t\t}\n\t  },\n\n\t  update: function (data) {\n\t    this.updateMaterial(data);\n\t    utils.material.updateMap(this, data);\n\t    if (data.normalMap) { utils.material.updateDistortionMap('normal', this, data); }\n\t    if (data.displacementMap) { utils.material.updateDistortionMap('displacement', this, data); }\n\t    if (data.ambientOcclusionMap) { utils.material.updateDistortionMap('ambientOcclusion', this, data); }\n\t    if (data.metalnessMap) { utils.material.updateDistortionMap('metalness', this, data); }\n\t    if (data.roughnessMap) { utils.material.updateDistortionMap('roughness', this, data); }\n\t    this.updateEnvMap(data);\n\t  },\n\n\t  /**\n\t   * Updating existing material.\n\t   *\n\t   * @param {object} data - Material component data.\n\t   * @returns {object} Material.\n\t   */\n\t  updateMaterial: function (data) {\n\t    var material = this.material;\n\t    data = getMaterialData(data);\n\t    Object.keys(data).forEach(function (key) {\n\t      material[key] = data[key];\n\t    });\n\t  },\n\n\t  /**\n\t   * Handle environment cubemap. Textures are cached in texturePromises.\n\t   */\n\t  updateEnvMap: function (data) {\n\t    var self = this;\n\t    var material = this.material;\n\t    var envMap = data.envMap;\n\t    var sphericalEnvMap = data.sphericalEnvMap;\n\n\t    // No envMap defined or already loading.\n\t    if ((!envMap && !sphericalEnvMap) || this.isLoadingEnvMap) {\n\t      material.envMap = null;\n\t      material.needsUpdate = true;\n\t      return;\n\t    }\n\t    this.isLoadingEnvMap = true;\n\n\t    // if a spherical env map is defined then use it.\n\t    if (sphericalEnvMap) {\n\t      this.el.sceneEl.systems.material.loadTexture(sphericalEnvMap, {src: sphericalEnvMap}, function textureLoaded (texture) {\n\t        self.isLoadingEnvMap = false;\n\t        texture.mapping = THREE.SphericalReflectionMapping;\n\t        material.envMap = texture;\n\t        utils.material.handleTextureEvents(self.el, texture);\n\t        material.needsUpdate = true;\n\t      });\n\t      return;\n\t    }\n\n\t    // Another material is already loading this texture. Wait on promise.\n\t    if (texturePromises[envMap]) {\n\t      texturePromises[envMap].then(function (cube) {\n\t        self.isLoadingEnvMap = false;\n\t        material.envMap = cube;\n\t        utils.material.handleTextureEvents(self.el, cube);\n\t        material.needsUpdate = true;\n\t      });\n\t      return;\n\t    }\n\n\t    // Material is first to load this texture. Load and resolve texture.\n\t    texturePromises[envMap] = new Promise(function (resolve) {\n\t      utils.srcLoader.validateCubemapSrc(envMap, function loadEnvMap (urls) {\n\t        CubeLoader.load(urls, function (cube) {\n\t          // Texture loaded.\n\t          self.isLoadingEnvMap = false;\n\t          material.envMap = cube;\n\t          utils.material.handleTextureEvents(self.el, cube);\n\t          resolve(cube);\n\t        });\n\t      });\n\t    });\n\t  }\n\t});\n\n\t/**\n\t * Builds and normalize material data, normalizing stuff along the way.\n\t *\n\t * @param {object} data - Material data.\n\t * @returns {object} data - Processed material data.\n\t */\n\tfunction getMaterialData (data) {\n\t  var newData = {\n\t    color: new THREE.Color(data.color),\n\t    emissive: new THREE.Color(data.emissive),\n\t    emissiveIntensity: data.emissiveIntensity,\n\t    fog: data.fog,\n\t    metalness: data.metalness,\n\t    roughness: data.roughness,\n\t    wireframe: data.wireframe,\n\t    wireframeLinewidth: data.wireframeLinewidth\n\t  };\n\n\t  if (data.normalMap) { newData.normalScale = data.normalScale; }\n\n\t  if (data.ambientOcclusionMap) { newData.aoMapIntensity = data.ambientOcclusionMapIntensity; }\n\n\t  if (data.displacementMap) {\n\t    newData.displacementScale = data.displacementScale;\n\t    newData.displacementBias = data.displacementBias;\n\t  }\n\n\t  return newData;\n\t}\n\n/***/ })\n/******/ ]);\n  \n  \n})()","let CS1 = window.CS1 = {};\nimport utils from './utils';\nutils(CS1);\nimport loadSpinner from './load-spinner';\nimport './load-spinner.css';\nimport grabbable from './grabbable';\nimport navpointer from './nav-pointer';\nimport player from './player';\nimport shaderfrog from './shader-frog';\nimport proximityGlitch from './proximity-glitch'\nimport hud from './hud';\nimport './hud.css';\nhud(CS1);\nimport game from './game';\ngame(CS1);\nimport socket from './client-socket';\nsocket(CS1);\nimport collectible from './collectible';\ncollectible(CS1);\nimport './main.css';\nimport login from './login';\nimport './login.css';\nimport aframeEffects from './aframe-effects';\n\n  \n\n  "],"names":["CS1","utils","uid","firstItem","value","counter","split","reduce","acc","curValue","curIndex","arr","curObj","prev","now","Date","performance","toString","replace","Math","random","substr","window","addEventListener","console","log","loadSpinner","document","createElement","className","i","appendChild","style","left","innerWidth","loadingScreen","querySelector","width","height","innerHeight","copyTransform","scratchMat","THREE","Matrix4","source","destination","matrix","copy","matrixWorld","applyMatrix","getInverse","parent","AFRAME","registerComponent","schema","origin","type","init","grab","e","cancelBubble","isDragging","cursor","detail","cursorEl","self","el","sceneEl","setAttribute","setTimeout","createProxyObject","object3D","originEl","emit","addState","release","proxyObject","remove","getAttribute","removeState","cursorObject","Object3D","visible","add","this","data","classList","device","isMobile","tick","ctrlEl","active","intersection","point","color","components","raycaster","refreshObjects","t","dt","setAvatar","src","setAnimation","name","shaders","Polkadot_Shader","Sun_Shader","Jelly_Shader","Green_Dance_Shader","Cosmic_Shader","Cool_Tiles_Shader","Disco_Shader","Marching_Ants_Shader","Goo_Shader","Psycho_Shader","ShaderRuntime","extend","length","arguments","obj","index","keys","Object","l","key","clone","omit","x","cloned","prototype","mainCamera","cubeCameras","reserved","time","cameraPosition","umap","float","int","vec2","[object Object]","Vector2","vec3","Vector3","vec4","Vector4","samplerCube","sampler2D","camera","Camera","Error","renderTarget","identifier","config","findBy","shaderTypes","shader","newShaderData","runningShaders","material","needsUpdate","oldName","newName","shaderType","initted","create","shaderName","uniform","newData","fragmentShader","fragment","vertexShader","vertex","uniformName","uniforms","getUmap","glslType","id","RawShaderMaterial","push","position","viewMatrix","matrixWorldInverse","registerSystem","registerCamera","systems","frog_runtime","clock","Clock","scene","hasLoaded","bind","updateShaders","getElapsedTime","originalMaterial","getObject3D","shaderData","update","system","get","threshold","default","baseEffects","game","playerDistanceTo","RingDial","container","labelText","suffix","labelColor","gradientColor1","gradientColor2","size","strokeWidth","radius","direction","svg","defs","slice","overlay","text","label","arrow","createSvg","createDefs","createSlice","createOverlay","createText","createLabel","createElementNS","gc1","gc2","linearGradient","stop1","stop2","linearGradientBackground","r","circle","c","fontSize","tspanSize","innerHTML","n","createArrow","arrowYOffset","m","arrowSize","arrowPosX","arrowPosY","arrowDOffset","animateStart","v","intervalOne","setInterval","p","toFixed","clearInterval","setValue","animateTo","to","a","animateReset","polarToCartesian","centerX","centerY","angleInDegrees","angleInRadians","PI","cos","y","sin","describeArc","startAngle","endAngle","start","end","largeArcFlag","join","xy","d","floor","Meter","min","max","low","high","optimum","widget","marginTop","marginBottom","parseFloat","range","textAlign","generateRegions","hudElement","containers","top","hud","pointsDial","statusDial","magicDial","oxygenMeter","gameName","emoji","favicon","theme","fontFamily","titleFontColor","formFontColor","formColor","overlayColor","avatar","models","url","scale","yOffset","animations","idle","msg","offset","thruster","innerColor","outerColor","buttonFaces","buttonColor","speed","sounds","playerJoined","playerLeft","yay","loop","volume","splashIn","splashOut","hyperspace","environment","preset","seed","shadow","playArea","shadowSize","dressing","dressingAmount","dressingColor","dressingScale","dressingVariance","dressingUniformScale","fog","flatShading","skyType","horizonColor","skyColor","ground","groundYScale","groundTexture","groundColor","groundColor2","grid","gridColor","lighting","lightPosition","bgm","songs","playAll","initialDelay","releasePointerLockOnUI","toggleUI","nextSong","toggleMute","toggleCursor","showCursor","voice","rate","pitch","welcomeDelay","physics","gravity","maxGrabDistance","objects","geometry","collectibles","itemDefs","rotation","positions","collectSound","collectParticles","callback","params","amount","animation","readouts","rotations","textAttributes","align","font","mobile","thruster_icon","joystick_outer_color","joystick_inner_color","vr","mode","isRunning","display","myPlayer","cam","spawnPos","spawnRot","startSpeed","pause","voices","speechSynthesis","getVoices","say","SpeechSynthesisUtterance","filter","speak","printVoices","forEach","lang","soundName","Audio","scenes","onended","play","entity","distanceTo","socket","io","on","playerData","faceIndex","lastPlayerData","login","un","pw","success","zIndex","getElementById","hasBegun","pos","Number","z","rot","isInitialized","initializePlayerData","setPlayerData","sendUpdateToServer","isEqual","bodiesData","bodies","b","states","includes","dirty","quaternion","w","soundState","debug","o","addOtherPlayer","compare","item1","item2","itemType","call","other","hasOwnProperty","RTCPeerConnection","mozRTCPeerConnection","webkitRTCPeerConnection","pc","iceServers","noop","createDataChannel","createOffer","setLocalDescription","onicecandidate","ice","candidate","arg","exec","soundIsPlaying","_callbacks","collectedEntity","sound","playSound","collector","collect","disconnected","indexOf","onload","loginContainer","connected","preventDefault","modules","__webpack_require__","moduleId","installedModules","exports","module","loaded","Component","attrName","System","registerShader","definition","NewComponent","proto","writable","attr","constructor","NewSystem","fx","renderer","cameras","Array","isArray","isPlaying","effects","chain","sys","oldData","set","pro","undefined","nd","render","behaviors","timeDelta","behavior","tock","Effects","passes","_passes","setupPostState","needsOverride","lightComponents","LightState","rows","cols","tileData","tileTexture","lightTexture","DataTexture","Float32Array","RGBAFormat","FloatType","addLight","removeLight","splice","WebGLRenderTarget","minFilter","LinearFilter","magFilter","format","texture","generateMipmaps","depthBuffer","depthTexture","DepthTexture","UnsignedShortType","stencilBuffer","Scene","OrthographicCamera","quad","Mesh","PlaneBufferGeometry","frustumCulled","sceneLeft","quadLeft","attributes","uv","array","sceneRight","quadRight","targets","tDiffuse","tDepth","cameraFar","cameraNear","uvClamp","uvBoth","resolution","uvLeft","uvRight","parseToken","renderPass","viewCb","forceClear","setView","h","viewport","scissor","setViewport","setScissor","isFn","s","getSize","oldClear","autoClear","round","materialize","fs","ShaderMaterial","depthWrite","depthTest","blending","NoBlending","extensions","derivatives","defines","fuse","temp","alpha","k","count","chunks","head","main","needsDepth","needsDiffuse","callMain","swapMain","args","tok","prop","Document","body","textContent","depth","dataset","diffuse","trim","defaults","prefix","u","inc","t2u","f","v2","v3","v4","m2","m3","m4","premain","rebuild","pickup","pass","makepass","dispose","writeBuffer","readBuffer","isActive","resize","bypass","needsResize","setSize","register","unregister","rt","effect","rts","onBeforeRender","resizeTiles","ArrayCamera","tileLights","rendererRender","setupPasses","far","near","ceil","Uint8Array","projectionMatrix","lights","image","ld","fill","vector","light","setFromMatrixPosition","pm","bs","lightBounds","applyMatrix4","toArray","decay","i4","i8","j","minX","maxX","minY","maxY","hw","hh","project","multiple","enabled","strength","ratio","smooth","pars","blurTarget","tockUniforms","Color","blurDirection","sobel","blur","currentMaterial","blurMaterial","nIntensity","sIntensity","sCount","us","FXAAShader","BlurDirectionX","BlurDirectionY","enable","renderTargetsHorizontal","renderTargetsVertical","nMips","renderTargetBright","luminosityThreshold","smoothWidth","defaultColor","defaultOpacity","materialHighPassFilter","separableBlurMaterials","kernelSizeArray","getSeperableBlurMaterial","compositeMaterial","getCompositeMaterial","bloomFactors","bloomTintColors","oldClearColor","getClearColor","oldClearAlpha","getClearAlpha","oldAutoClear","setClearColor","inputRenderTarget","resx","resy","kernelRadius","KERNEL_RADIUS","SIGMA","colorTexture","texSize","NUM_MIPS","blurTexture1","blurTexture2","blurTexture3","blurTexture4","blurTexture5","bloomStrength","bloomRadius","shaderID","lut","lutClamp","lutFlip","mul","pow","right","quant","orig","red","green","blue","Texture","NearestFilter","op","ops","preFragment","q","g","tDisp","generateHeightmap","angle","seed_x","seed_y","distortion_x","distortion_y","col_s","glitch","curF","generateTrigger","randX","randFloat","randInt","dt_size","data_arr","val","RGBFormat","tint","intensity","rtFilter","rtTextureGodRays1","rtTextureGodRays2","step","materialGodraysGenerate","attenuation","materialFilter","fn","eye","cp3","cd3","getWorldPosition","getWorldDirection","sub","normalize","dot","stepLen","SAOShader","DepthLimitedBlurShader","samples","rings","maxDepth","bias","blurRadius","depthCutoff","renderTargets","SAOMaterial","hBlurMaterial","vBlurMaterial","sizeUniform","od","sao","parseInt","isFirst","cameraProjectionMatrix","cameraInverseProjectionMatrix","minResolution","randomSeed","BlurShaderUtils","createSampleWeights","stdDev","weights","exp","sqrt","createSampleOffsets","uvIncrement","offsets","multiplyScalar","configure","sampleUvOffsets","sampleWeights","getMaterialData","emissive","emissiveIntensity","metalness","roughness","wireframe","wireframeLinewidth","normalMap","normalScale","ambientOcclusionMap","aoMapIntensity","ambientOcclusionMapIntensity","displacementMap","displacementScale","displacementBias","ShaderChunk","CubeLoader","CubeTextureLoader","texturePromises","ambientOcclusionTextureOffset","ambientOcclusionTextureRepeat","displacementTextureOffset","displacementTextureRepeat","envMap","metalnessMap","metalnessTextureOffset","metalnessTextureRepeat","normalTextureOffset","normalTextureRepeat","repeat","roughnessMap","roughnessTextureOffset","roughnessTextureRepeat","sphericalEnvMap","MeshStandardMaterial","updateMap","updateDistortionMap","updateEnvMap","onBeforeCompile","State","updateMaterial","isLoadingEnvMap","loadTexture","mapping","SphericalReflectionMapping","handleTextureEvents","then","cube","Promise","resolve","srcLoader","validateCubemapSrc","urls","load","collectible"],"mappings":"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"}